'use strict';var jsonSchemaRefParser=require('@hey-api/json-schema-ref-parser'),At=require('path'),c12=require('c12'),d=require('typescript'),os$1=require('os'),Ds=require('fs');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var At__default=/*#__PURE__*/_interopDefault(At);var d__default=/*#__PURE__*/_interopDefault(d);var Ds__default=/*#__PURE__*/_interopDefault(Ds);var Un=(...e)=>{let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let n=r instanceof Headers?r.entries():Object.entries(r);for(let[s,i]of n)if(i===null)t.delete(s);else if(Array.isArray(i))for(let p of i)t.append(s,p);else i!==void 0&&t.set(s,typeof i=="object"?JSON.stringify(i):i);}return t};var Bi=async({fetchOptions:e,inputPath:t,timeout:r,watch:n})=>{let s=new jsonSchemaRefParser.$RefParser,i=jsonSchemaRefParser.getResolvedInput({pathOrUrlOrSchema:t}),p,a,c;if(i.type==="url"){if(n.lastValue&&n.isHeadMethodSupported!==false){try{let f=await jsonSchemaRefParser.sendRequest({fetchOptions:{method:"HEAD",...e,headers:Un(e?.headers,n.headers)},timeout:r,url:i.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok&&n.isHeadMethodSupported)return {error:"not-ok",response:c};if(n.isHeadMethodSupported===void 0&&(n.isHeadMethodSupported=c.ok),c.status===304)return {error:"not-modified",response:c};if(a===void 0){let f=c.headers.get("ETag");f&&(a=f!==n.headers.get("If-None-Match"),a&&n.headers.set("If-None-Match",f));}if(a===void 0){let f=c.headers.get("Last-Modified");f&&(a=f!==n.headers.get("If-Modified-Since"),a&&n.headers.set("If-Modified-Since",f));}if(a===false)return {error:"not-modified",response:c}}try{let f=await jsonSchemaRefParser.sendRequest({fetchOptions:{method:"GET",...e},timeout:r,url:i.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok)return {error:"not-ok",response:c};if(p=c.body?await c.arrayBuffer():new ArrayBuffer(0),a===void 0){let f=new TextDecoder().decode(p);a=f!==n.lastValue,n.lastValue=f;}}else n.lastValue?a=false:n.lastValue=i.type;return a===false?{error:"not-modified",response:c}:{data:await s.bundle({arrayBuffer:p,pathOrUrlOrSchema:void 0,resolvedInput:i})}};var Qn=e=>{let t={file:true,level:"info",path:process.cwd()};return typeof e?.logs=="string"?t.path=e.logs:t={...t,...e?.logs},t};var Ke={_dependencies:["@hey-api/typescript"],_tags:["client"],baseUrl:true,bundle:false,exportFromIndex:false,output:"client"};var oe="client",J=e=>{let t=T(e);return t.name==="@hey-api/client-axios"||t.name==="@hey-api/client-nuxt"?"baseURL":"baseUrl"},T=e=>{for(let t of e.pluginOrder){let r=e.plugins[t];if(r?._tags?.includes("client"))return r}return {name:""}};var xt=/^[^$_\p{ID_Start}]+/u,Te=/^-?\d+(\.\d+)?$/,Xn=/^(document|history|location|navigator|window)$/g,Hn=/^(console|Array|Date|Error|Function|JSON|Map|Math|Object|Promise|RegExp|Set|WeakMap|WeakSet)$/g,ie=/^(arguments|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|eval|export|extends|false|finally|for|from|function|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)$/g,zn=/^(global|process|Buffer)$/g,Jn=/^(any|as|bigint|boolean|namespace|never|null|number|string|symbol|type|undefined|unknown|void)$/g,re=/^[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*$/u;var Ce=e=>(e||e==="")&&(re.lastIndex=0,!re.test(e))?`'${e}'`:e,Ft=e=>e&&e.startsWith("'")&&e.endsWith("'")?e.slice(1,e.length-1):e,N=e=>e.replace(/\*\//g,"*").replace(/\/\*/g,"*").replace(/\r?\n(.*)/g,(t,r)=>os$1.EOL+r.trim());var Gn,b=()=>{let e=Gn,t=T(e);return e.client=t,e},Zn=e=>(Gn=e,b()),w=e=>T(e).name.startsWith("legacy/"),Be=e=>{if(w(e))return e.name};var Ui=d__default.default.createPrinter({newLine:d__default.default.NewLineKind.LineFeed,removeComments:false}),Yn=e=>d__default.default.createSourceFile("",e,d__default.default.ScriptTarget.ESNext,false,d__default.default.ScriptKind.TS),Wi=Yn(""),Qi=e=>e.replace(/\\u([0-9a-fA-F]{4})/g,(t,r)=>String.fromCharCode(Number.parseInt(r,16)));function ae({node:e,unescape:t=false}){let r=Ui.printNode(d__default.default.EmitHint.Unspecified,e,Wi);if(!t)return r;try{return Qi(r)}catch{return b().logs.level==="debug"&&console.warn("Could not decode value:",r),r}}function es(e){return Yn(e).statements[0]}var S=({text:e})=>d__default.default.factory.createIdentifier(e),H={boolean:e=>e?d__default.default.factory.createTrue():d__default.default.factory.createFalse(),export:({alias:e,asType:t=false,name:r})=>{let n=S({text:r});if(e){let s=S({text:e});return d__default.default.factory.createExportSpecifier(t,n,s)}return d__default.default.factory.createExportSpecifier(t,void 0,n)},import:({alias:e,asType:t=false,name:r})=>{let n=S({text:r});if(e){let s=S({text:e});return d__default.default.factory.createImportSpecifier(t,n,s)}return d__default.default.factory.createImportSpecifier(t,void 0,n)},number:e=>e<0?d__default.default.factory.createPrefixUnaryExpression(d__default.default.SyntaxKind.MinusToken,d__default.default.factory.createNumericLiteral(Math.abs(e))):d__default.default.factory.createNumericLiteral(e),string:(e,t=false)=>{let r=e;t&&(r=Ft(r));let n=r.includes("'")&&r.includes('"'),s=r.includes(`
`),i=r.startsWith("`"),p=r.startsWith("\\`")&&r.endsWith("\\`");return (s||n||i)&&!p&&(r=`\`${r.replace(/(?<!\\)`/g,"\\`").replace(/\${/g,"\\${")}\``),r.startsWith("`")?S({text:r}):st({text:r})}},nt=e=>e!==null&&typeof e=="object"&&typeof e.kind=="number"&&typeof e.flags=="number"&&typeof e.pos=="number"&&typeof e.end=="number",Ve=e=>e!==void 0,Xi=({commentObject:e,node:t})=>{let r=e.lines.filter(p=>!!p||p==="");if(!r.length)return;if(!e.jsdoc){for(let p of r)d__default.default.addSyntheticLeadingComment(t,d__default.default.SyntaxKind.SingleLineCommentTrivia,` ${p}`,true);return}let n=r.map((p,a)=>{let c=p;return a!==r.length&&(c=`${c}
`),d__default.default.factory.createJSDocText(c)}),s=d__default.default.factory.createJSDocComment(d__default.default.factory.createNodeArray(n),void 0),i=ae({node:s,unescape:true}).replace("/*","").replace("*  */","");d__default.default.addSyntheticLeadingComment(t,d__default.default.SyntaxKind.MultiLineCommentTrivia,i,true);},L=({comments:e=[],node:t})=>{let r=!!e.find(s=>typeof s=="object"&&s),n=e;r||(n=[{jsdoc:true,lines:e}]);for(let s of n)Xi({commentObject:s,node:t});};var V=(e,t)=>d__default.default.isTypeNode(e)?e:typeof e=="number"?d__default.default.factory.createLiteralTypeNode(H.number(e)):ne({typeArguments:t?.map(r=>V(r)),typeName:e}),_r=({expression:e,name:t})=>d__default.default.factory.createPropertyAccessChain(e,d__default.default.factory.createToken(d__default.default.SyntaxKind.QuestionDotToken),t),ce=({expression:e,isOptional:t,name:r})=>{let n=typeof e=="string"?S({text:e}):e;if(t)return _r({expression:n,name:r});if(typeof r=="string"&&(re.lastIndex=0,!re.test(r))){!r.startsWith("'")&&!r.endsWith("'")&&(r=`'${r}'`);let i=S({text:r});return d__default.default.factory.createElementAccessExpression(n,i)}let s=typeof r=="string"?S({text:r}):r;return d__default.default.factory.createPropertyAccessExpression(n,s)},Kr=()=>d__default.default.factory.createNull(),pe=({identifiers:e=[],isValueAccess:t,shorthand:r,unescape:n,value:s})=>{if(s===null)return Kr();if(Array.isArray(s))return Vr({elements:s});if(typeof s=="object")return pr({identifiers:e,obj:s,shorthand:r});if(typeof s=="number")return H.number(s);if(typeof s=="boolean")return H.boolean(s);if(typeof s=="string"){if(t){let i=s.split(".");return ce({expression:i[0],name:i[1]})}return H.string(s,n)}},ir=e=>{let t=e==="public"?d__default.default.SyntaxKind.PublicKeyword:e==="protected"?d__default.default.SyntaxKind.ProtectedKeyword:e==="private"?d__default.default.SyntaxKind.PrivateKeyword:void 0,r=[];return t&&r.push(d__default.default.factory.createModifier(t)),r},Dt=e=>e.map(t=>{if("destructure"in t)return Ot({name:d__default.default.factory.createObjectBindingPattern(t.destructure.map(n=>"destructure"in n?void 0:d__default.default.factory.createBindingElement(void 0,void 0,S({text:n.name}),void 0)).filter(Boolean))});let r=ir(t.accessLevel);return t.isReadOnly&&(r=[...r,d__default.default.factory.createModifier(d__default.default.SyntaxKind.ReadonlyKeyword)]),Ot({initializer:t.default!==void 0?pe({value:t.default}):void 0,modifiers:r,name:S({text:t.name}),required:t.isRequired!==false,type:t.type!==void 0?V(t.type):void 0})}),bt=({keyword:e})=>{let t=d__default.default.SyntaxKind.AnyKeyword;switch(e){case "boolean":t=d__default.default.SyntaxKind.BooleanKeyword;break;case "never":t=d__default.default.SyntaxKind.NeverKeyword;break;case "number":t=d__default.default.SyntaxKind.NumberKeyword;break;case "string":t=d__default.default.SyntaxKind.StringKeyword;break;case "undefined":t=d__default.default.SyntaxKind.UndefinedKeyword;break;case "unknown":t=d__default.default.SyntaxKind.UnknownKeyword;break;case "void":t=d__default.default.SyntaxKind.VoidKeyword;break}return d__default.default.factory.createKeywordTypeNode(t)},Lt=e=>e.map(t=>d__default.default.isTypeParameterDeclaration(t)?t:Br({constraint:t.extends?typeof t.extends=="string"?bt({keyword:"boolean"}):t.extends:void 0,defaultType:t.default!==void 0?nt(t.default)?t.default:d__default.default.factory.createLiteralTypeNode(t.default?d__default.default.factory.createTrue():d__default.default.factory.createFalse()):void 0,name:t.name})),ts=({operator:e,type:t})=>{let r=e==="keyof"?d__default.default.SyntaxKind.KeyOfKeyword:e==="readonly"?d__default.default.SyntaxKind.ReadonlyKeyword:d__default.default.SyntaxKind.UniqueKeyword;return d__default.default.factory.createTypeOperatorNode(r,t)},Br=({constraint:e,defaultType:t,modifiers:r,name:n})=>d__default.default.factory.createTypeParameterDeclaration(r,n,e,t),rs=({members:e,nameType:t,questionToken:r,readonlyToken:n,type:s,typeParameter:i})=>d__default.default.factory.createMappedTypeNode(n,i,t,r,s,e),ns=({literal:e})=>d__default.default.factory.createLiteralTypeNode(e),ar=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:s,statements:i=[],types:p=[]})=>{let a=d__default.default.factory.createArrowFunction(e?[d__default.default.factory.createModifier(d__default.default.SyntaxKind.AsyncKeyword)]:void 0,p?Lt(p):void 0,Dt(n),s?V(s):void 0,void 0,Array.isArray(i)?G({multiLine:r,statements:i}):i);return L({comments:t,node:a}),a},ss=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:s,statements:i=[],types:p=[]})=>{let a=d__default.default.factory.createFunctionExpression(e?[d__default.default.factory.createModifier(d__default.default.SyntaxKind.AsyncKeyword)]:void 0,void 0,void 0,p?Lt(p):void 0,Dt(n),s?V(s):void 0,G({multiLine:r,statements:i}));return L({comments:t,node:a}),a},Vr=({elements:e,multiLine:t=false})=>d__default.default.factory.createArrayLiteralExpression(e.map(n=>nt(n)?n:pe({value:n})).filter(Ve),t||!Array.isArray(e[0])&&typeof e[0]=="object"),os=({expression:e})=>d__default.default.factory.createAwaitExpression(e),is=({parameters:e=[],returnType:t,typeParameters:r})=>d__default.default.factory.createFunctionTypeNode(r,e,t),pr=({comments:e,identifiers:t=[],multiLine:r=true,obj:n,shorthand:s,unescape:i=false})=>{let p=Array.isArray(n)?n.map(c=>{let m=false;if("key"in c){let{key:u}=c;m=u===c.value,(u.match(/^[0-9]/)&&u.match(/\D+/g)||u.match(/\W/g)||u==="")&&!u.startsWith("'")&&!u.endsWith("'")&&(c.key=`'${u}'`);}let f;if("spread"in c){let u=nt(c.spread)?c.spread:S({text:c.spread});f=d__default.default.factory.createSpreadAssignment(c.assertion?Kt({expression:u,type:typeof c.assertion=="string"?bt({keyword:c.assertion}):c.assertion}):u);}else if(c.shorthand||s&&m)f=d__default.default.factory.createShorthandPropertyAssignment(c.value);else {let u=nt(c.value)?c.value:Array.isArray(c.value)?pr({multiLine:r,obj:c.value,shorthand:s,unescape:i}):pe({identifiers:t.includes(c.key)?Object.keys(c.value):[],isValueAccess:c.isValueAccess,shorthand:s,unescape:i,value:c.value});if(!u)return;t.includes(c.key)&&!d__default.default.isObjectLiteralExpression(u)&&(u=S({text:c.value})),f=or({initializer:u,name:c.key});}return L({comments:c.comments,node:f}),f}).filter(Ve):Object.entries(n).map(([c,m])=>{let f=pe({identifiers:t.includes(c)?Object.keys(m):[],shorthand:s,unescape:i,value:m});if(!f)return;t.includes(c)&&!d__default.default.isObjectLiteralExpression(f)&&(f=S({text:m}));let u=c===m;return c.match(/^[0-9]/)&&c.match(/\D+/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),c.match(/\W/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),s&&u?d__default.default.factory.createShorthandPropertyAssignment(m):or({initializer:f,name:c})}).filter(Ve),a=d__default.default.factory.createObjectLiteralExpression(p,r);return L({comments:e,node:a}),a},as=({comments:e={},leadingComment:t,name:r,obj:n})=>{let s=Array.isArray(n)?n.map(p=>{let a=zi({initializer:pe({value:p.value}),name:p.key});return L({comments:p.comments,node:a}),a}):Object.entries(n).map(([p,a])=>{let c=d__default.default.factory.createEnumMember(p,pe({unescape:true,value:a}));return L({comments:e[p],node:c}),c}),i=d__default.default.factory.createEnumDeclaration([d__default.default.factory.createModifier(d__default.default.SyntaxKind.ExportKeyword)],S({text:r}),s);return L({comments:t,node:i}),i},zi=({initializer:e,name:t})=>{let r=t;return typeof r=="string"&&(r.startsWith("'")&&r.endsWith("'")?r=st({isSingleQuote:false,text:r}):r=Ce(r)),d__default.default.factory.createEnumMember(r,e)},ps=({name:e,statements:t})=>d__default.default.factory.createModuleDeclaration([d__default.default.factory.createModifier(d__default.default.SyntaxKind.ExportKeyword)],S({text:e}),d__default.default.factory.createModuleBlock(t),d__default.default.NodeFlags.Namespace),cs=({indexType:e,objectType:t})=>d__default.default.factory.createIndexedAccessTypeNode(t,e),st=({isSingleQuote:e,text:t})=>(e===void 0&&(e=!t.includes("'")),d__default.default.factory.createStringLiteral(t,e)),ms=({condition:e,whenFalse:t,whenTrue:r})=>d__default.default.factory.createConditionalExpression(e,d__default.default.factory.createToken(d__default.default.SyntaxKind.QuestionToken),r,d__default.default.factory.createToken(d__default.default.SyntaxKind.ColonToken),t),fs=({text:e})=>d__default.default.factory.createTypeOfExpression(S({text:e})),us=({comment:e,exportType:t,name:r,type:n,typeParameters:s=[]})=>{let i=d__default.default.factory.createTypeAliasDeclaration(t?[d__default.default.factory.createModifier(d__default.default.SyntaxKind.ExportKeyword)]:void 0,S({text:r}),Lt(s),V(n));return L({comments:e,node:i}),i},ne=({typeArguments:e,typeName:t})=>d__default.default.factory.createTypeReferenceNode(t,e),ls=({type:e})=>d__default.default.factory.createParenthesizedType(e),Ot=({initializer:e,modifiers:t,name:r,required:n=true,type:s})=>d__default.default.factory.createParameterDeclaration(t,void 0,r,n?void 0:d__default.default.factory.createToken(d__default.default.SyntaxKind.QuestionToken),s,e),_t=({argumentsArray:e,expression:t,typeArguments:r})=>d__default.default.factory.createNewExpression(t,r,e),ds=({awaitModifier:e,expression:t,initializer:r,statement:n})=>d__default.default.factory.createForOfStatement(e,r,t,n),ys=({left:e,right:t})=>d__default.default.factory.createAssignment(e,t),G=({multiLine:e=true,statements:t})=>d__default.default.factory.createBlock(t,e),or=({initializer:e,name:t})=>d__default.default.factory.createPropertyAssignment(t,e),gs=({flags:e=[],text:t})=>d__default.default.factory.createRegularExpressionLiteral(`/${t}/${e.join("")}`),Kt=({expression:e,type:t})=>d__default.default.factory.createAsExpression(e,t),hs=({value:e})=>{let t=[],r="";for(let s of e.slice(0).reverse())if(typeof s=="string")r=`${s}${r}`;else {let i=t.length?d__default.default.factory.createTemplateMiddle(r):d__default.default.factory.createTemplateTail(r),p=d__default.default.factory.createTemplateLiteralTypeSpan(s,i);t.push(p),r="";}return d__default.default.factory.createTemplateLiteralType(d__default.default.factory.createTemplateHead(r),t.reverse())};var xs=({module:e})=>d__default.default.factory.createExportDeclaration(void 0,false,void 0,H.string(e)),me=({functionName:e,parameters:t=[],types:r})=>{let n=typeof e=="string"?S({text:e}):e,s=t.filter(p=>p!==void 0).map(p=>typeof p=="string"?S({text:p}):p);return d__default.default.factory.createCallExpression(n,r,s)},Os=({exports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(c=>typeof c!="object"||!c.asType),s=r.map(c=>{let m=typeof c=="string"?{name:c}:c;return H.export({alias:m.alias,asType:n&&m.asType,name:m.name})}),i=d__default.default.factory.createNamedExports(s),p=H.string(t);return d__default.default.factory.createExportDeclaration(void 0,!n,i,p)},bs=({assertion:e,comment:t,destructure:r,exportConst:n,expression:s,name:i,typeName:p})=>{let a=e?Kt({expression:s,type:typeof e=="string"?ne({typeName:e}):e}):s,c=S({text:i}),m=d__default.default.factory.createVariableDeclaration(r?d__default.default.factory.createObjectBindingPattern([d__default.default.factory.createBindingElement(void 0,void 0,c,void 0)]):c,void 0,p?typeof p=="string"?ne({typeName:p}):p:void 0,a),f=d__default.default.factory.createVariableStatement(n?[d__default.default.factory.createModifier(d__default.default.SyntaxKind.ExportKeyword)]:void 0,d__default.default.factory.createVariableDeclarationList([m],d__default.default.NodeFlags.Const));return L({comments:t,node:f}),f},Ss=({imports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(m=>typeof m!="object"||!m.asType),s=r.map(m=>{let f=typeof m=="string"?{name:m}:m;return H.import({alias:f.alias,asType:n&&f.asType,name:f.name})}),i=d__default.default.factory.createNamedImports(s),p=d__default.default.factory.createImportClause(!n,void 0,i),a=H.string(t);return d__default.default.factory.createImportDeclaration(void 0,p,a)};var Rs=({accessLevel:e,comment:t,multiLine:r=true,parameters:n=[],statements:s=[]})=>{let i=d__default.default.factory.createConstructorDeclaration(ir(e),Dt(n),G({multiLine:r,statements:s}));return L({comments:t,node:i}),i},Is=({accessLevel:e,comment:t,isStatic:r=false,multiLine:n=true,name:s,parameters:i=[],returnType:p,statements:a=[],types:c=[]})=>{let m=ir(e);r&&(m=[...m,d__default.default.factory.createModifier(d__default.default.SyntaxKind.StaticKeyword)]);let f=d__default.default.factory.createMethodDeclaration(m,void 0,S({text:s}),void 0,c?Lt(c):void 0,Dt(i),p?V(p):void 0,G({multiLine:n,statements:a}));return L({comments:t,node:f}),f},Ts=({decorator:e,members:t=[],name:r})=>{let n=[d__default.default.factory.createModifier(d__default.default.SyntaxKind.ExportKeyword)];e&&(n=[d__default.default.factory.createDecorator(me({functionName:e.name,parameters:e.args.map(i=>pe({value:i})).filter(Ve)})),...n]);let s=[];return t.forEach(i=>{s=[...s,i,S({text:`
`})];}),d__default.default.factory.createClassDeclaration(n,S({text:r}),[],[],s)};var ot=({expression:e})=>d__default.default.factory.createExpressionStatement(e);var cr=({expression:e})=>d__default.default.factory.createReturnStatement(e),Ps=({args:e=[],name:t,types:r=[]})=>{let n=r.map(a=>ne({typeName:a})),s=e.map(a=>d__default.default.isExpression(a)?a:S({text:a})).filter(Ve),i=me({functionName:t,parameters:s,types:n});return cr({expression:i})},js=({expression:e})=>cr({expression:typeof e=="string"?S({text:e}):e});var St=e=>e.slice(1).reduce((t,r)=>(re.lastIndex=0,re.test(r)?_r({expression:t,name:r}):d__default.default.factory.createElementAccessChain(t,d__default.default.factory.createToken(d__default.default.SyntaxKind.QuestionDotToken),S({text:r}))),S({text:e[0]})),mr=e=>e.slice(1).reduce((t,r)=>ce({expression:t,name:r}),S({text:e[0]})),As=({expressions:e})=>e.reduce((r,n)=>ce({expression:r,name:n})),fr=({left:e,operator:t="=",right:r})=>d__default.default.factory.createBinaryExpression(e,t==="="?d__default.default.SyntaxKind.EqualsToken:t==="==="?d__default.default.SyntaxKind.EqualsEqualsEqualsToken:t==="??"?d__default.default.SyntaxKind.QuestionQuestionToken:d__default.default.SyntaxKind.InKeyword,typeof r=="string"?S({text:r}):r),Rt=({elseStatement:e,expression:t,thenStatement:r})=>d__default.default.factory.createIfStatement(t,r,e),Ns=({path:e})=>{let t=St(e),r=mr(e),n=G({statements:[ot({expression:fr({left:r,right:_t({argumentsArray:[r],expression:S({text:"Date"})})})})]});return Rt({expression:t,thenStatement:n})},Es=({path:e,transformerName:t})=>{let r=St(e),n=mr(e),s=G({statements:[ot({expression:me({functionName:t,parameters:[n]})})]});return [Rt({expression:r,thenStatement:s})]},$s=({path:e,transformerName:t})=>{let r=St(e),n=mr(e);return Rt({expression:me({functionName:ce({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:G({statements:[ot({expression:d__default.default.factory.createCallChain(ce({expression:n,name:"forEach"}),void 0,void 0,[S({text:t})])})]})})},ks=({parameterName:e})=>{let t=S({text:"Date"});return _t({argumentsArray:[S({text:e})],expression:t})},qs=({path:e,transformExpression:t})=>{let r=St(e),n=mr(e);return Rt({expression:me({functionName:ce({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:G({statements:[ot({expression:fr({left:n,right:d__default.default.factory.createCallChain(ce({expression:n,name:"map"}),void 0,void 0,[ar({parameters:[{name:"item"}],statements:t})])})})]})})};var na=ne({typeName:"null"}),It=({isNullable:e,node:t})=>e?d__default.default.factory.createUnionTypeNode([t,na]):t,Ur=({indexProperty:e,isNullable:t,properties:r,useLegacyResolution:n})=>{let i=r.map(a=>{let c=a.isReadOnly?[d__default.default.factory.createModifier(d__default.default.SyntaxKind.ReadonlyKeyword)]:void 0,m=a.isRequired!==false?void 0:d__default.default.factory.createToken(d__default.default.SyntaxKind.QuestionToken),f=V(a.type);let u=d__default.default.factory.createPropertySignature(c,n||typeof a.name=="string"&&a.name.match(re)||typeof a.name!="string"&&d__default.default.isPropertyName(a.name)?a.name:st({text:a.name}),m,f);return L({comments:a.comment,node:u}),u});if(e){let a=e.isReadOnly?[d__default.default.factory.createModifier(d__default.default.SyntaxKind.ReadonlyKeyword)]:void 0,c=d__default.default.factory.createIndexSignature(a,[Ot({name:S({text:String(e.name)}),type:bt({keyword:"string"})})],V(e.type));i.push(c);}let p=d__default.default.factory.createTypeLiteralNode(i);return It({isNullable:t,node:p})},Bt=({isNullable:e,types:t})=>{let r=t.map(s=>V(s)),n=d__default.default.factory.createUnionTypeNode(r);return It({isNullable:e,node:n})},vs=({isNullable:e,types:t})=>{let r=t.map(s=>V(s)),n=d__default.default.factory.createIntersectionTypeNode(r);return It({isNullable:e,node:n})},ws=({isNullable:e=false,types:t})=>{let r=t.map(s=>V(s)),n=d__default.default.factory.createTupleTypeNode(r);return It({isNullable:e,node:n})},Ms=(e,t,r=false,n=true)=>{let s=Bt({types:e}),i=Bt({types:t}),p=Ur({properties:[{name:`[key: ${ae({node:s,unescape:true})}]`,type:i}],useLegacyResolution:n});return It({isNullable:r,node:p})},Fs=(e,t=false)=>{let r=ne({typeArguments:[Array.isArray(e)?Bt({types:e}):e],typeName:"Array"});return It({isNullable:t,node:r})};var o={anonymousFunction:ss,arrayLiteralExpression:Vr,arrowFunction:ar,asExpression:Kt,assignment:ys,awaitExpression:os,binaryExpression:fr,block:G,callExpression:me,classDeclaration:Ts,conditionalExpression:ms,constVariable:bs,constructorDeclaration:Rs,enumDeclaration:as,exportAllDeclaration:xs,exportNamedDeclaration:Os,expressionToStatement:ot,forOfStatement:ds,functionTypeNode:is,identifier:S,ifStatement:Rt,indexedAccessTypeNode:cs,isTsNode:nt,keywordTypeNode:bt,literalTypeNode:ns,mappedTypeNode:rs,methodDeclaration:Is,namedImportDeclarations:Ss,namespaceDeclaration:ps,newExpression:_t,nodeToString:ae,null:Kr,objectExpression:pr,ots:H,parameterDeclaration:Ot,propertyAccessExpression:ce,propertyAccessExpressions:As,propertyAssignment:or,regularExpressionLiteral:gs,returnFunctionCall:Ps,returnStatement:cr,returnVariable:js,safeAccessExpression:St,stringLiteral:st,stringToTsNodes:es,templateLiteralType:hs,transformArrayMap:qs,transformArrayMutation:$s,transformDateMutation:Ns,transformFunctionMutation:Es,transformNewDate:ks,typeAliasDeclaration:us,typeArrayNode:Fs,typeInterfaceNode:Ur,typeIntersectionNode:vs,typeNode:V,typeOfExpression:fs,typeOperatorNode:ts,typeParameterDeclaration:Br,typeParenthesizedNode:ls,typeRecordNode:Ms,typeReferenceNode:ne,typeTupleNode:ws,typeUnionNode:Bt,valueToExpression:pe};var Wr=e=>{Ds__default.default.existsSync(e)||Ds__default.default.mkdirSync(e,{recursive:true});};var Tt=({moduleOutput:e,sourceOutput:t})=>{let r=t.split("/");return `${Array.from({length:r.length}).fill("").join("../")||"./"}${e}`};var oa=e=>{let t=e.split(At__default.default.sep);return t.slice(0,t.length-1).join(At__default.default.sep)},F=({config:e,sourceOutput:t})=>{let r=T(e);if("bundle"in r&&r.bundle)return Tt({moduleOutput:"client",sourceOutput:t});if(At__default.default.isAbsolute(r.name)){let n=oa(r.name),s=At__default.default.resolve(e.output.path);return At__default.default.relative(s,n).replace(/\\/g,"/")}return r.name},q={Options:{asType:true,name:"Options"},OptionsLegacyParser:{asType:true,name:"OptionsLegacyParser"}};var Ls=/^(([^:/?#]+):)?((\/\/)?([^:/?#]*)(:?([^/?#]*)))?([^?#]*)(\?([^#]*))?(#(.*))?/,fe=e=>{let t={host:"",path:"",port:"",protocol:""};Ls.lastIndex=0;let r=e.match(Ls);if(!r)return t;let n=r[5]||"";if(n==="."||n==="..")return t;let s=r[8]||"",i=r[2]||"";return i.length===1?t:{host:n,path:s==="/"?"":s,port:r[7]||"",protocol:i}};var Ct="#/ir/",ur=e=>{let t=Qr(e);return t.length===3&&t[0]==="components"},_=e=>{let t=Qr(e),r=t[t.length-1];return decodeURI(r)},Qr=e=>e.replace(/^#\//,"").split("/"),Xr=({$ref:e,spec:t})=>{let r=Qr(decodeURI(e)),n=t;for(let s of r){let i=s;if(n[i]===void 0)throw new Error(`Reference not found: ${e}`);n=n[i];}return n};var _s=/[\p{Lu}]/u,Hr=/[\p{Ll}]/u,Bs=/([\p{Alpha}\p{N}_]|$)/u,Pt=/[_.\- `\\[\]{}\\/]+/,ia=new RegExp(`^${Pt.source}`),zr=new RegExp(`${Pt.source}${Bs.source}`,"gu"),Ks=new RegExp(`\\d+${Bs.source}`,"gu"),aa=({case:e,string:t})=>{let r=false,n=false,s=false,i=false,p=e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?"_":"-";for(let a=0;a<t.length;a++){let c=t[a];i=a>2?t[a-3]===p:true;let m=a+1,f=t[m];for(Pt.lastIndex=0;f&&Pt.test(f);)m+=1,f=t[m];let u=m!==a+1;if(Hr.lastIndex=0,_s.lastIndex=0,_s.test(c)&&(r||f&&!u&&f!=="s"&&Hr.test(f)))t=`${t.slice(0,a)}${p}${t.slice(a)}`,a++,s=n,r=false,n=true;else if(n&&s&&Hr.test(c)&&!i&&!(c==="s"&&(!f||f.toLocaleLowerCase()!==f)))t=`${t.slice(0,a-1)}${p}${t.slice(a-1)}`,s=n,r=true,n=false;else {let l=c.toLocaleLowerCase(),y=c.toLocaleUpperCase();s=n,r=l===c&&y!==c,n=y===c&&l!==c;}}return t},j=({case:e,stripLeadingSeparators:t=true,value:r})=>{let n=r.trim();return n.length?!e||e==="preserve"?n:n.length===1?(Pt.lastIndex=0,Pt.test(n)?"":e==="PascalCase"||e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase()):(n!==n.toLocaleLowerCase()&&(n=aa({case:e,string:n})),(t||n[0]!==r[0])&&(n=n.replace(ia,"")),n=e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase(),e==="PascalCase"&&(n=`${n.charAt(0).toLocaleUpperCase()}${n.slice(1)}`),e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?(n=n.replaceAll(zr,(i,p,a)=>a===0&&!t?i:`_${p}`),n[n.length-1]==="_"&&(n=n.slice(0,n.length-1))):(zr.lastIndex=0,Ks.lastIndex=0,n=n.replaceAll(Ks,(i,p,a)=>["_","-","."].includes(n.charAt(a+i.length))?i:i.toLocaleUpperCase()),n=n.replaceAll(zr,(i,p,a)=>a===0&&!t&&i[0]&&r.startsWith(i[0])?i:p.toLocaleUpperCase())),n):""};var v=({case:e="PascalCase",id:t,type:r})=>{let n="";switch(r){case "data":n="Data";break;case "error":n="Error";break;case "errors":n="Errors";break;case "response":n="Response";break;case "responses":n="Responses";break}return `${Ct}${j({case:e,value:t})}-${n}`};var I="types";function Jr(e,t){return {...e,get name(){return t?.(e),e.name}}}var Vs=({context:e,file:t,operation:r})=>{let n=e.file({id:I}).identifier({$ref:v({id:r.id,type:"data"}),namespace:"type"});return Jr(n,s=>{s.name&&t.import({asType:true,module:t.relativePathToFile({context:e,id:I}),name:s.name});})},lr=({context:e,file:t,operation:r})=>{let n=e.file({id:I}).identifier({$ref:v({id:r.id,type:"error"}),namespace:"type"});return Jr(n,s=>{s.name&&t.import({asType:true,module:t.relativePathToFile({context:e,id:I}),name:s.name});})},it=({context:e,file:t,operation:r})=>{let n=e.file({id:I}).identifier({$ref:v({id:r.id,type:"response"}),namespace:"type"});return Jr(n,s=>{s.name&&t.import({asType:true,module:t.relativePathToFile({context:e,id:I}),name:s.name});})};var pa=({context:e,plugin:t})=>{let{baseUrl:r}=t;if(r===false)return;if(typeof r=="string")return r;let{servers:n}=e.ir;if(n)return n[typeof r=="number"?r:0]?.url},Us=({context:e,plugin:t})=>{let r=e.file({id:oe}),n=F({config:e.config,sourceOutput:r.nameWithoutExtension()}),s=r.import({module:n,name:"createClient"}),i=r.import({module:n,name:"createConfig"}),p=r.import({asType:true,module:r.relativePathToFile({context:e,id:I}),name:"ClientOptions"}),a=t.runtimeConfigPath?r.import({module:r.relativePathToFile({context:e,id:t.runtimeConfigPath}),name:"createClientConfig"}):void 0,c=[],m=pa({context:e,plugin:t});if(m){let l=fe(m);l.protocol&&l.host&&!m.includes("{")&&c.push({key:J(e.config),value:m});}"throwOnError"in t&&t.throwOnError&&c.push({key:"throwOnError",value:true});let f=[o.callExpression({functionName:i.name,parameters:c.length?[o.objectExpression({obj:c})]:void 0,types:[o.typeReferenceNode({typeName:p.name})]})],u=o.constVariable({exportConst:true,expression:o.callExpression({functionName:s.name,parameters:a?[o.callExpression({functionName:a.name,parameters:f})]:f}),name:"client"});r.add(u);};var Ws=({context:e})=>{let t=e.file({id:oe}),r=F({config:e.config,sourceOutput:t.nameWithoutExtension()}),n=t.import({asType:true,module:t.relativePathToFile({context:e,id:I}),name:"ClientOptions"}),s=t.import({asType:true,module:r,name:"Config"}),i=t.import({alias:"DefaultClientOptions",asType:true,module:r,name:"ClientOptions"}),p=o.typeReferenceNode({typeName:i.name}),a=o.typeReferenceNode({typeName:"T"}),c=o.typeAliasDeclaration({comment:["The `createClientConfig()` function will be called on client initialization","and the returned object will become the client's initial configuration.","","You may want to initialize your client this way instead of calling","`setConfig()`. This is useful for example if you're using Next.js","to ensure your client always has the correct values."],exportType:true,name:"CreateClientConfig",type:o.functionTypeNode({parameters:[o.parameterDeclaration({name:"override",required:false,type:o.typeReferenceNode({typeArguments:[o.typeIntersectionNode({types:[p,a]})],typeName:s.name})})],returnType:o.typeReferenceNode({typeArguments:[o.typeIntersectionNode({types:[o.typeReferenceNode({typeArguments:[p],typeName:"Required"}),a]})],typeName:s.name})}),typeParameters:[{default:o.typeReferenceNode({typeName:n.name}),extends:p,name:"T"}]});t.add(c);};var We=({context:e,plugin:t})=>{e.createFile({exportFromIndex:t.exportFromIndex,id:oe,path:t.output}),Ws({context:e}),Us({context:e,plugin:t});};var Gr={...Ke,_handler:We,_handlerLegacy:()=>{},name:"@hey-api/client-axios",throwOnError:false};var Zr={...Ke,_handler:We,_handlerLegacy:()=>{},name:"@hey-api/client-fetch",throwOnError:false};var Yr={...Ke,_handler:We,_handlerLegacy:()=>{},name:"@hey-api/client-next",throwOnError:false};var en={...Ke,_handler:We,_handlerLegacy:()=>{},name:"@hey-api/client-nuxt"};var tn={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/angular",output:"client"};var rn={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/axios",output:"client"};var nn={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/fetch",output:"client"};var sn={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/node",output:"client"};var on={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/xhr",output:"client"};var ca=[ie,Jn,Hn,zn,Xn],dr=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");if(xt.lastIndex=0,xt.test(t))return `_${t}`;for(let r of ca){if(t.startsWith("_"))return t;t=t.replace(r,"_$1");}return t};var yr="schemas",an=({plugin:e,schema:t})=>{e.type==="form"&&(t.description&&delete t.description,t["x-enum-descriptions"]&&delete t["x-enum-descriptions"],t["x-enum-varnames"]&&delete t["x-enum-varnames"],t["x-enumNames"]&&delete t["x-enumNames"],t.title&&delete t.title);},jt=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(s=>jt({context:e,plugin:t,schema:s}));let n=structuredClone(r);if(n.$ref)return n.$ref=decodeURI(n.$ref),n;if(an({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=jt({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(s=>jt({context:e,plugin:t,schema:s}))),n.items&&(n.items=jt({context:e,plugin:t,schema:n.items})),n.properties)for(let s in n.properties){let i=n.properties[s];typeof i!="boolean"&&(n.properties[s]=jt({context:e,plugin:t,schema:i}));}return n},Qe=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(s=>Qe({context:e,plugin:t,schema:s}));let n=structuredClone(r);if("$ref"in n)return n.$ref=decodeURI(n.$ref),n;if(an({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=Qe({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(s=>Qe({context:e,plugin:t,schema:s}))),n.anyOf&&(n.anyOf=n.anyOf.map(s=>Qe({context:e,plugin:t,schema:s}))),n.items&&(n.items=Qe({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(s=>Qe({context:e,plugin:t,schema:s}))),n.properties)for(let s in n.properties){let i=n.properties[s];typeof i!="boolean"&&(n.properties[s]=Qe({context:e,plugin:t,schema:i}));}return n},Pe=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(s=>Pe({context:e,plugin:t,schema:s}));let n=structuredClone(r);if(an({plugin:t,schema:n}),n.$ref&&(n.$ref=decodeURI(n.$ref)),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=Pe({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(s=>Pe({context:e,plugin:t,schema:s}))),n.anyOf&&(n.anyOf=n.anyOf.map(s=>Pe({context:e,plugin:t,schema:s}))),n.items&&(n.items=Pe({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(s=>Pe({context:e,plugin:t,schema:s}))),n.prefixItems&&(n.prefixItems=n.prefixItems.map(s=>Pe({context:e,plugin:t,schema:s}))),n.properties)for(let s in n.properties){let i=n.properties[s];typeof i!="boolean"&&(n.properties[s]=Pe({context:e,plugin:t,schema:i}));}return n},pn=({name:e,plugin:t,schema:r})=>{let n=t.nameBuilder?.(e,r)??`${e}Schema`;return dr(n)},ma=({context:e,plugin:t})=>{if(e.spec.definitions)for(let r in e.spec.definitions){let n=e.spec.definitions[r],s=jt({context:e,plugin:t,schema:n}),i=o.constVariable({assertion:"const",exportConst:true,expression:o.objectExpression({obj:s}),name:pn({name:r,plugin:t,schema:n})});e.file({id:yr}).add(i);}},fa=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],s=Qe({context:e,plugin:t,schema:n}),i=o.constVariable({assertion:"const",exportConst:true,expression:o.objectExpression({obj:s}),name:pn({name:r,plugin:t,schema:n})});e.file({id:yr}).add(i);}},ua=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],s=Pe({context:e,plugin:t,schema:n}),i=o.constVariable({assertion:"const",exportConst:true,expression:o.objectExpression({obj:s}),name:pn({name:r,plugin:t,schema:n})});e.file({id:yr}).add(i);}},Qs=({context:e,plugin:t})=>{if(e.createFile({exportFromIndex:t.exportFromIndex,id:yr,path:t.output}),"swagger"in e.spec){ma({context:e,plugin:t});return}switch(e.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":fa({context:e,plugin:t});break;case "3.1.0":case "3.1.1":ua({context:e,plugin:t});break;}};var ue=class{_exportFromIndex;_headers=[];_identifierCase;_imports=new Map;_items=[];_name;_path;namespaces={type:{},value:{}};constructor({dir:t,exportFromIndex:r=false,header:n=true,identifierCase:s,name:i}){this._exportFromIndex=r,this._identifierCase=s,this._name=this._setName(i),this._path=At__default.default.resolve(t,this._name),n&&this._headers.push("// This file is auto-generated by @hey-api/openapi-ts");}add(...t){this._items=this._items.concat(t);}blockIdentifier({$ref:t,namespace:r}){let n=this.namespaces[r][t];if(!n)throw new Error(`Identifier for $ref ${t} in namespace ${r} not found`);return n.name=false,{created:false,name:n.name}}get exportFromIndex(){return this._exportFromIndex}identifier({namespace:t,...r}){return Hs({case:this._identifierCase,namespace:this.namespaces[t],...r})}import({module:t,...r}){let n=this._imports.get(t);n||(n=new Map,this._imports.set(t,n));let s=n.get(r.name);return s?{...s,name:s.alias||s.name}:(n.set(r.name,r),{...r,name:r.alias||r.name})}isEmpty(){return !this._items.length}nameWithoutExtension(){let{name:t}=cn(this._name);return t}relativePathToFile({context:t,id:r}){let n="";if(r.startsWith(".")){let m=[];if(t.config.configFile){let f=t.config.configFile.split("/");m=f.slice(0,f.length-1);}n=At__default.default.resolve(process.cwd(),...m,r);}else {let m=t.file({id:r});if(!m)throw new Error(`File with id ${r} does not exist`);n=m._path;}let s=this._path.split(At__default.default.sep),i=n.split(At__default.default.sep),p=-1,a="";for(let m of s)if(p+=1,i[p]!==m){let f=Array.from({length:s.length-p}).fill(""),u=i.slice(p),l=u.slice(0,u.length-1);l.length&&l.push(""),a=(f.join("../")||"./")+l.join("/");break}let c=i[i.length-1];return `${a}${cn(c).name}`}remove(t){Ds__default.default.rmSync(this._path,t);}removeNode(){this._items=this._items.slice(0,this._items.length-1);}_setName(t){if(t.includes("index"))return t;let{extension:r,name:n}=cn(t);return [n,"gen",r].filter(Boolean).join(".")}toString(t=`
`){let r=[];this._headers.length&&r.push(this._headers.join(`
`));let n=[];for(let[s,i]of this._imports.entries()){let p=Array.from(i.values()),a=o.namedImportDeclarations({imports:p,module:s});n.push(ae({node:a}));}return n.length&&r.push(n.join(`
`)),r=r.concat(this._items.map(s=>typeof s=="string"?s:ae({node:s,unescape:true}))),r.join(t)}write(t=`
`){if(this.isEmpty()){this.remove({force:true});return}let r=this._path;if(typeof this._path=="string"){let n=this._path.split(At__default.default.sep);r=n.slice(0,n.length-1).join(At__default.default.sep);}Wr(r),Ds__default.default.writeFileSync(this._path,this.toString(t));}},Hs=({$ref:e,case:t,count:r=1,create:n=false,nameTransformer:s,namespace:i})=>{let p=e.split("/"),a=p[p.length-1]||"";if(!a)return {created:false,name:""};let c=i[e];if(c)return {created:false,name:c.name};let m=s?.(a)??a,f=j({case:t,value:m});r>1&&(f=`${f}${r}`);let u=i[f];return u?u.$ref===e?{created:false,name:u.name}:Hs({$ref:e,case:t,count:r+1,create:n,nameTransformer:s,namespace:i}):n?(u={$ref:e,name:dr(f)},i[f]=u,i[u.$ref]=u,{created:true,name:u.name}):{created:false,name:""}},cn=e=>{let t=e.match(/\.[0-9a-z]+$/i),r=t?t[0].slice(1):"",n=e.slice(0,e.length-(r?r.length+1:0));return {extension:r,name:n}};var gr=class{config;files;ir;spec;listeners;constructor({config:t,spec:r}){this.config=t,this.files={},this.ir={},this.listeners={},this.spec=r;}async broadcast(t,...r){this.listeners[t]&&await Promise.all(this.listeners[t].map((n,s)=>{try{let i=n(...r);return Promise.resolve(i)}catch(i){throw console.error(`\u{1F525} Event broadcast: "${t}"
index: ${s}
arguments: ${JSON.stringify(r,null,2)}`),i}}));}createFile(t){let r=t.path.split("/"),n=At__default.default.resolve(this.config.output.path,...r.slice(0,r.length-1)),s=new ue({dir:n,exportFromIndex:t.exportFromIndex,identifierCase:t.identifierCase,name:`${r[r.length-1]}.ts`});return this.files[t.id]=s,s}file({id:t}){return this.files[t]}resolveIrRef(t){return Xr({$ref:t,spec:this.ir})}resolveRef(t){return Xr({$ref:t,spec:this.spec})}subscribe(t,r){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(r);}};var zs=({$ref:e,filters:t,schema:r})=>{for(let n of t)if(n instanceof RegExp){if(n.lastIndex=0,n.test(e))return  true}else {let s=n[0]||"",i=n[1];if(i===void 0){if(r[s])return  true}else if(r[s]===i)return  true}return  false},Nt=({excludeFilters:e,includeFilters:t,...r})=>!e&&!t?true:e&&zs({...r,filters:e})?false:t?zs({...r,filters:t}):true,Js=e=>e.startsWith("@")?e.slice(1).split(":"):new RegExp(e),je=e=>{if(e)return typeof e=="string"?[Js(e)]:e.map(t=>Js(t))};var P=({source:e,target:t})=>{let r={...t};if(e&&(e.cookie&&(r.cookie?r.cookie={...r.cookie,...e.cookie}:r.cookie=e.cookie),e.header&&(r.header?r.header={...r.header,...e.header}:r.header=e.header),e.path&&(r.path?r.path={...r.path,...e.path}:r.path=e.path),e.query&&(r.query?r.query={...r.query,...e.query}:r.query=e.query)),!!Object.keys(r).length)return r};var at=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");return xt.lastIndex=0,xt.test(t)?`_${t}`:t},pt=e=>e.replace(/^[^\p{ID_Start}]+/u,"").replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"-").replace(/[$+]/g,"-"),mn=e=>{let t=e.replace("[]","Array");return pt(t)};var Et=({context:e,id:t,method:r,operationIds:n,path:s})=>{if(!t)return;let i=`${r.toUpperCase()} ${s}`;n.has(t)?e.config.logs.level!=="silent"&&console.warn(`\u2757\uFE0F Duplicate operationId: ${t} in ${i}. Please ensure your operation IDs are unique. This behavior is not supported and will likely lead to unexpected results.`):n.set(t,i);},$t=({context:e,id:t,method:r,path:n})=>{if(t&&(!e.config.plugins["@hey-api/sdk"]||e.config.plugins["@hey-api/sdk"].operationId))return j({case:"camelCase",value:pt(t)});let s=n.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-");return j({case:"camelCase",value:`${r}-${s}`})};var Gs=/^(application\/(pdf|rtf|msword|vnd\.(ms-|openxmlformats-officedocument\.)|zip|x-(7z|tar|rar|zip|iso)|octet-stream|gzip|x-msdownload|json\+download|xml|x-yaml|x-7z-compressed|x-tar)|text\/(yaml|css|javascript)|audio\/(mpeg|wav)|video\/(mp4|x-matroska)|image\/(vnd\.adobe\.photoshop|svg\+xml))(; ?charset=[^;]+)?$/i,Zs=/^application\/(.*\+)?json(;.*)?$/i,Ys=/^multipart\/form-data(;.*)?$/i,eo=/^text\/[a-z0-9.+-]+(;.*)?$/i,to=/^application\/x-www-form-urlencoded(;.*)?$/i,Ae=({mediaType:e})=>(Gs.lastIndex=0,Gs.test(e)),kt=({mediaType:e})=>{if(Zs.lastIndex=0,Zs.test(e))return "json";if(Ys.lastIndex=0,Ys.test(e))return "form-data";if(eo.lastIndex=0,eo.test(e))return "text";if(to.lastIndex=0,to.test(e))return "url-search-params"};var ro=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&Ae({mediaType:t})?{...r,format:"binary"}:r:Ae({mediaType:t})?{format:"binary",type:"string"}:void 0},fn=({mimeTypes:e,response:t})=>{for(let r of e??[])return {mediaType:r,schema:t.schema,type:kt({mediaType:r})}};var no=["after","before","cursor","offset","page","start"];function z({keywords:e=no}={}){e.length===0&&(e=no);let t=`^(${e.join("|")})$`;return new RegExp(t)}var E=({items:e,logicalOperator:t="or",mutateSchemaOneItem:r=false,schema:n})=>e.length?n.type==="tuple"?(n.items=e,n):e.length!==1?(n.items=e,n.logicalOperator=t,n):r?(n={...n,...e[0]},n):(n.items=e,n):n;var le=(e,t)=>{for(let r in t)if(t[r]===e)return r;return _(e)};var R=(e,t)=>{if(!e?.length)return t?.length?t:void 0;if(!t?.length)return e;let r=new Set(e);for(let n of t)r.add(n);return r.size>e.length?Array.from(r):e};var Ut=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},da=({irSchema:e,schema:t})=>{t.description&&(e.description=t.description),t.title&&(e.title=t.title);},hr=({irSchema:e,schema:t})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly&&(e.accessScope="read",e.accessScopes=R(e.accessScopes,["read"]));},ya=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let s=[];if(r.items){let i=Z({context:e,schema:r.items,state:n});if(t.accessScopes=R(t.accessScopes,i.accessScopes),!s.length&&r.maxItems&&r.maxItems===r.minItems)s=Array(r.maxItems).fill(i);else if("$ref"in r.items)s.push(i);else {let p=r.items.allOf;p&&p.length>1&&!r.items["x-nullable"]?t={...t,...i}:s.push(i);}}return t=E({items:s,schema:t}),t},ga=({irSchema:e={}})=>(e.type="boolean",e),ha=({irSchema:e={},schema:t})=>(e.type=t.type,e),xa=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let s={};for(let i in r.properties){let p=r.properties[i];if(typeof p!="boolean"){let a=Z({context:e,schema:p,state:n});t.accessScopes=R(t.accessScopes,a.accessScopes),s[i]=a;}}if(Object.keys(s).length&&(t.properties=s),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let i=Z({context:e,schema:r.additionalProperties,state:n});(t.properties||i.type!=="unknown")&&(t.additionalProperties=i);}return r.required&&(t.required=r.required),t},Oa=({irSchema:e={}})=>(e.type="string",e),qt=({schema:e})=>{let t={};return da({irSchema:t,schema:e}),t},ba=({context:e,schema:t,state:r})=>{let n=qt({schema:t}),s=[],i=Ut({schema:t}),p=t.allOf;for(let a of p){let c=Z({context:e,schema:a,state:r});if(n.accessScopes=R(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),s.push(c),a.$ref){let m=e.resolveRef(a.$ref);if(m.discriminator&&r.$ref){let f={properties:{[m.discriminator]:{const:le(r.$ref),type:"string"}},type:"object"};m.required?.includes(m.discriminator)&&(f.required=[m.discriminator]),s.push(f);}if(!r.circularReferenceTracker.has(a.$ref)){let f=Z({context:e,schema:m,state:{...r,$ref:a.$ref}});n.accessScopes=R(n.accessScopes,f.accessScopes);}}}if(i==="object"){let a=Wt({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties){for(let c of a.required??[])if(!a.properties[c])for(let m of p){let f=m.$ref?e.resolveRef(m.$ref):m;if(Ut({schema:f})==="object"){let u=Wt({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=R(n.accessScopes,u.accessScopes),u.properties?.[c]){a.properties[c]=u.properties[c];break}}}s.push(a);}}if(n=E({items:s,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t["x-nullable"]){let a=[{type:"null"}];s.length&&a.unshift(n),n={items:a,logicalOperator:"or"},a[0].deprecated&&(n.deprecated=a[0].deprecated),a[0].description&&(n.description=a[0].description);}return n},Sa=({context:e,schema:t,state:r})=>{let n=qt({schema:t});n.type="enum";let s=[];for(let[i,p]of t.enum.entries()){let a=typeof p,c;if(a==="string"||a==="number"||a==="boolean"?c=a:p===null?t["x-nullable"]&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${a}" typeof value "${p}" for enum`,t.enum),!c)continue;let m=Wt({context:e,schema:{description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:c==="null"?"string":c},state:r});m.const=p,c==="null"&&(m.type=c),n.accessScopes=R(n.accessScopes,m.accessScopes),s.push(m);}return n=E({items:s,schema:n}),n},Ra=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),n.$ref=n.$ref.replace(/#\/definitions\/([^/]+)/g,"#/components/schemas/$1"),!r.circularReferenceTracker.has(t.$ref)){let s=e.resolveRef(t.$ref),i=Z({context:e,schema:s,state:{...r,$ref:t.$ref}});n.accessScopes=R(n.accessScopes,i.accessScopes);}return n},Ia=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=qt({schema:r}));let s={};hr({irSchema:s,schema:r}),s.default===null&&delete s.default;let i=[Wt({context:e,irSchema:s,schema:r,state:n}),{type:"null"}];return t=E({items:i,schema:t}),t},Ta=({context:e,schema:t,state:r})=>{let n=qt({schema:t});hr({irSchema:n,schema:t});let s=Ut({schema:t});return s?t["x-nullable"]?Ia({context:e,irSchema:n,schema:{...t,type:s},state:r}):Wt({context:e,irSchema:n,schema:{...t,type:s},state:r}):n},Wt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=qt({schema:r}),hr({irSchema:t,schema:r})),r.type){case "array":return ya({context:e,irSchema:t,schema:r,state:n});case "boolean":return ga({irSchema:t});case "integer":case "number":return ha({irSchema:t,schema:r});case "object":return xa({context:e,irSchema:t,schema:r,state:n});case "string":return Oa({irSchema:t});default:return so({irSchema:t,schema:r})}},so=({irSchema:e,schema:t})=>(e||(e=qt({schema:t})),e.type="unknown",hr({irSchema:e,schema:t}),e),Z=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?Ra({context:e,schema:t,state:r}):t.enum?Sa({context:e,schema:t,state:r}):t.allOf?ba({context:e,schema:t,state:r}):t.type||t.properties?Ta({context:e,schema:t,state:r}):so({schema:t})),oo=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[_(e)]=Z({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Ca=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",Xe=({context:e,name:t,schema:r})=>{if(z(e.config.input.pagination).test(t))return  true;if("$ref"in r){let s=e.resolveRef(r.$ref??"");if("in"in s&&s.in){let i="schema"in s?s.schema:{...s,in:void 0};return Xe({context:e,name:t,schema:i})}return Xe({context:e,name:t,schema:s})}if("in"in r){if(!r.in)return  false;let s="schema"in r?r.schema:{...r,in:void 0};return Xe({context:e,name:t,schema:s})}for(let s in r.properties)if(z(e.config.input.pagination).test(s)){let p=r.properties[s];if(typeof p!="boolean"&&!("$ref"in p)){let a=Ut({schema:p});if(Ca(a))return s}}for(let s of r.allOf??[]){let i=Xe({context:e,name:t,schema:s});if(i)return i}return  false};var Pa=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},ja=({method:e,operation:t,path:r})=>{let n={id:t.id,method:e,path:r};return Pa({irOperation:n,operation:t}),n},Aa=({context:e,method:t,operation:r,path:n,securitySchemesMap:s})=>{let i=ja({method:t,operation:r,path:n});r.parameters&&(i.parameters=r.parameters);let p=false,a={mediaType:"",schema:{properties:{},required:[],type:"object"}},c=[];for(let m of r.requestBody??[]){let f="$ref"in m?e.resolveRef(m.$ref):m,u=f.in==="body"?f.schema:{...f,format:f.type==="file"?"binary":f.format,required:void 0,type:f.type==="file"?"string":f.type},l=fn({mimeTypes:r.consumes,response:{schema:u}});if(l){let y=Xe({context:e,name:"",schema:l.schema&&"$ref"in l.schema?{allOf:[{...l.schema}],description:f.description}:{description:f.description,...l.schema}}),O=Z({context:e,schema:"$ref"in f?{allOf:[{...f,$ref:f.$ref,required:[],type:"string"}],description:f.description}:l.schema&&"$ref"in l.schema?{allOf:[{...l.schema}],description:f.description}:{description:f.description,...l.schema},state:void 0});a.mediaType=l.mediaType,f.in==="body"?a.schema=O:(a.schema.properties[f.name]=O,f.required&&c.push(f.name)),y&&(a.pagination=y),l.type&&(a.type=l.type);}f.required&&(p=true);}a.mediaType&&(c.length&&(a.schema.required=c),i.body=a,p&&(i.body.required=p));for(let m in r.responses){i.responses||(i.responses={});let f=r.responses[m],u="$ref"in f?e.resolveRef(f.$ref):f,l=fn({mimeTypes:r.produces?r.produces:["application/json"],response:u});l?i.responses[m]={mediaType:l.mediaType,schema:Z({context:e,schema:{description:u.description,...ro({content:l})},state:void 0})}:i.responses[m]={schema:{description:u.description,type:m==="204"?"void":"unknown"}};}if(r.security){let m=[];for(let f of r.security)for(let u in f){let l=s.get(u);if(!l)continue;let y;if(l.type==="apiKey"&&(y=l),l.type==="basic"&&(y={description:l.description,scheme:"basic",type:"http"}),l.type==="oauth2")switch(y={description:l.description,flows:{},type:"oauth2"},l.flow){case "accessCode":y.flows.authorizationCode={authorizationUrl:l.authorizationUrl,scopes:l.scopes,tokenUrl:l.tokenUrl};break;case "application":y.flows.clientCredentials={scopes:l.scopes,tokenUrl:l.tokenUrl};break;case "implicit":y.flows.implicit={authorizationUrl:l.authorizationUrl,scopes:l.scopes};break;case "password":y.flows.password={scopes:l.scopes,tokenUrl:l.tokenUrl};break}y&&m.push(y);}m.length&&(i.security=m);}return i},He=({context:e,method:t,operation:r,operationIds:n,path:s,securitySchemesMap:i})=>{Et({context:e,id:r.operationId,method:t,operationIds:n,path:s}),e.ir.paths||(e.ir.paths={}),e.ir.paths[s]||(e.ir.paths[s]={}),r.id=$t({context:e,id:r.operationId,method:t,path:s}),e.ir.paths[s][t]=Aa({context:e,method:t,operation:r,path:s,securitySchemesMap:i});};var Na=e=>{switch(e){case "multi":return  true;case "csv":case "pipes":case "ssv":case "tsv":default:return  false}},Ea=e=>{switch(e){case "header":case "path":return "simple";case "query":default:return "form"}},Ne=({context:e,operation:t,parameters:r})=>{if(!r||!Object.keys(r).length)return;let n={};for(let s of r){let i="$ref"in s?e.resolveRef(s.$ref):s;if(i.in==="body"||i.in==="formData"){t.requestBody||(t.requestBody=[]),t.requestBody.push(i);continue}n[i.in]||(n[i.in]={}),n[i.in][i.name]=$a({context:e,parameter:i});}return n},$a=({context:e,parameter:t})=>{let r=t,n=r&&"$ref"in r?{allOf:[{...r,$ref:r.$ref,required:Array.isArray(r.required)?r.required:[],type:r.type}],description:t.description}:{description:t.description,...r,required:Array.isArray(r.required)?r.required:[],type:r.type},s=Xe({context:e,name:t.name,schema:n}),i=Ea(t.in),c={allowReserved:false,explode:Na(t.collectionFormat),location:t.in,name:t.name,schema:Z({context:e,schema:n,state:void 0}),style:i};return t.description&&(c.description=t.description),s&&(c.pagination=s),t.required&&(c.required=t.required),c};var io=({context:e})=>{let t=e.spec.schemes??[],r=e.spec.host??"",n=e.spec.basePath??"";if(typeof e.config.input.path=="string"){let i=fe(e.config.input.path);t.length||i.protocol&&(t=[i.protocol]),r||(r=`${i.host}${i.port?`:${i.port}`:""}`);}t.length||(t=[""]);let s=t.map(i=>`${i?`${i}://`:""}${r}${n}`).filter(Boolean);s.length&&(e.ir.servers=s.map(i=>({url:i})));};var un=e=>{let t=new Map,r=new Map,n=je(e.config.input.exclude),s=je(e.config.input.include),i=(p,a)=>Nt({$ref:p,excludeFilters:n,includeFilters:s,schema:a});for(let p in e.spec.securityDefinitions){let a=e.spec.securityDefinitions[p];r.set(p,a);}if(e.spec.definitions)for(let p in e.spec.definitions){let a=`#/definitions/${p}`,c=e.spec.definitions[p];i(a,c)&&oo({$ref:a,context:e,schema:c});}io({context:e});for(let p in e.spec.paths){if(p.startsWith("x-"))continue;let a=e.spec.paths[p],c=a.$ref?{...e.resolveRef(a.$ref),...a}:a,m={consumes:e.spec.consumes,produces:e.spec.produces,responses:{},security:e.spec.security},f={context:e,operation:{...m,id:"",parameters:Ne({context:e,operation:m,parameters:c.parameters})},operationIds:t,path:p,securitySchemesMap:r},u=`#/paths${p}/delete`;if(c.delete&&i(u,c.delete)){let C=P({source:Ne({context:e,operation:c.delete,parameters:c.delete.parameters}),target:f.operation.parameters});He({...f,method:"delete",operation:{...f.operation,...c.delete,parameters:C}});}let l=`#/paths${p}/get`;if(c.get&&i(l,c.get)){let C=P({source:Ne({context:e,operation:c.get,parameters:c.get.parameters}),target:f.operation.parameters});He({...f,method:"get",operation:{...f.operation,...c.get,parameters:C}});}let y=`#/paths${p}/head`;if(c.head&&i(y,c.head)){let C=P({source:Ne({context:e,operation:c.head,parameters:c.head.parameters}),target:f.operation.parameters});He({...f,method:"head",operation:{...f.operation,...c.head,parameters:C}});}let O=`#/paths${p}/options`;if(c.options&&i(O,c.options)){let C=P({source:Ne({context:e,operation:c.options,parameters:c.options.parameters}),target:f.operation.parameters});He({...f,method:"options",operation:{...f.operation,...c.options,parameters:C}});}let g=`#/paths${p}/patch`;if(c.patch&&i(g,c.patch)){let C=P({source:Ne({context:e,operation:c.patch,parameters:c.patch.parameters}),target:f.operation.parameters});He({...f,method:"patch",operation:{...f.operation,...c.patch,parameters:C}});}let x=`#/paths${p}/post`;if(c.post&&i(x,c.post)){let C=P({source:Ne({context:e,operation:c.post,parameters:c.post.parameters}),target:f.operation.parameters});He({...f,method:"post",operation:{...f.operation,...c.post,parameters:C}});}let h=`#/paths${p}/put`;if(c.put&&i(h,c.put)){let C=P({source:Ne({context:e,operation:c.put,parameters:c.put.parameters}),target:f.operation.parameters});He({...f,method:"put",operation:{...f.operation,...c.put,parameters:C}});}}};var ao=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&Ae({mediaType:t})?{...r,format:"binary"}:r:Ae({mediaType:t})?{format:"binary",type:"string"}:void 0},Ee=({content:e})=>{for(let t in e)return {mediaType:t,schema:e[t].schema,type:kt({mediaType:t})}};var ct=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},ka=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},xr=({irSchema:e,schema:t})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=R(e.accessScopes,["read"])):t.writeOnly&&(e.accessScope="write",e.accessScopes=R(e.accessScopes,["write"]));},qa=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let s=[];if(r.items){let i=K({context:e,schema:r.items,state:n});if(t.accessScopes=R(t.accessScopes,i.accessScopes),!s.length&&r.maxItems&&r.maxItems===r.minItems)s=Array(r.maxItems).fill(i);else if("$ref"in r.items)s.push(i);else {let p=r.items.allOf||r.items.anyOf||r.items.oneOf;p&&p.length>1&&!r.items.nullable?t={...t,...i}:s.push(i);}}return t=E({items:s,schema:t}),t},va=({irSchema:e={}})=>(e.type="boolean",e),wa=({irSchema:e={},schema:t})=>(e.type=t.type,e),Ma=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let s={};for(let i in r.properties){let p=r.properties[i];if(typeof p!="boolean"){let a=K({context:e,schema:p,state:n});t.accessScopes=R(t.accessScopes,a.accessScopes),s[i]=a;}}if(Object.keys(s).length&&(t.properties=s),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let i=K({context:e,schema:r.additionalProperties,state:n});(t.properties||i.type!=="unknown")&&(t.additionalProperties=i);}return r.required&&(t.required=r.required),t},Fa=({irSchema:e={}})=>(e.type="string",e),ze=({schema:e})=>{let t={};return ka({irSchema:t,schema:e}),t},Da=({context:e,schema:t,state:r})=>{let n=ze({schema:t}),s=[],i=ct({schema:t}),p=t.allOf;for(let a of p){let c=K({context:e,schema:a,state:r});if(n.accessScopes=R(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),s.push(c),"$ref"in a){let m=e.resolveRef(a.$ref);if(m.discriminator&&r.$ref){let f={properties:{[m.discriminator.propertyName]:{const:le(r.$ref,m.discriminator.mapping),type:"string"}},type:"object"};m.required?.includes(m.discriminator.propertyName)&&(f.required=[m.discriminator.propertyName]),s.push(f);}if(!r.circularReferenceTracker.has(a.$ref)){let f=K({context:e,schema:m,state:{...r,$ref:a.$ref}});n.accessScopes=R(n.accessScopes,f.accessScopes);}}}if(i==="object"){let a=mt({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties){for(let c of a.required??[])if(!a.properties[c])for(let m of p){let f="$ref"in m?e.resolveRef(m.$ref):m;if(ct({schema:f})==="object"){let u=mt({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=R(n.accessScopes,u.accessScopes),u.properties?.[c]){a.properties[c]=u.properties[c];break}}}s.push(a);}}if(n=E({items:s,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t.nullable){let a=[{type:"null"}];s.length&&a.unshift(n),n={items:a,logicalOperator:"or"},a[0].deprecated&&(n.deprecated=a[0].deprecated),a[0].description&&(n.description=a[0].description);}return n},La=({context:e,schema:t,state:r})=>{let n=ze({schema:t}),s=[],i=ct({schema:t}),p=t.anyOf;for(let a of p){let c=K({context:e,schema:a,state:r});n.accessScopes=R(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in a&&(c={items:[{properties:{[t.discriminator.propertyName]:{const:le(a.$ref,t.discriminator.mapping),type:"string"}},type:"object"},c],logicalOperator:"and"}),s.push(c);}if(t.nullable&&s.push({type:"null"}),n=E({items:s,mutateSchemaOneItem:true,schema:n}),i==="object"){let a=mt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties&&(n={items:[n,a],logicalOperator:"and"});}return n},_a=({context:e,schema:t,state:r})=>{let n=ze({schema:t});n.type="enum";let s=[];for(let[i,p]of t.enum.entries()){let a=typeof p,c;if(a==="string"||a==="number"||a==="boolean"?c=a:p===null?t.nullable&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${a}" typeof value "${p}" for enum`,t.enum),!c)continue;let m=mt({context:e,schema:{description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:c==="null"?"string":c},state:r});m.const=p,c==="null"&&(m.type=c),n.accessScopes=R(n.accessScopes,m.accessScopes),s.push(m);}return n=E({items:s,schema:n}),n},Ka=({context:e,schema:t,state:r})=>{let n=ze({schema:t}),s=[],i=ct({schema:t}),p=t.oneOf;for(let a of p){let c=K({context:e,schema:a,state:r});n.accessScopes=R(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in a&&(c={items:[{properties:{[t.discriminator.propertyName]:{const:le(a.$ref,t.discriminator.mapping),type:"string"}},type:"object"},c],logicalOperator:"and"}),c.logicalOperator==="or"&&c.items?s=s.concat(c.items):s.push(c);}if(t.nullable&&s.push({type:"null"}),n=E({items:s,mutateSchemaOneItem:true,schema:n}),i==="object"){let a=mt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties&&(n={items:[n,a],logicalOperator:"and"});}return n},Ba=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let s=e.resolveRef(t.$ref),i=K({context:e,schema:s,state:{...r,$ref:t.$ref}});n.accessScopes=R(n.accessScopes,i.accessScopes);}return n},Va=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=ze({schema:r}));let s={};xr({irSchema:s,schema:r}),s.default===null&&delete s.default;let i=[mt({context:e,irSchema:s,schema:r,state:n}),{type:"null"}];return t=E({items:i,schema:t}),t},Ua=({context:e,schema:t,state:r})=>{let n=ze({schema:t});xr({irSchema:n,schema:t});let s=ct({schema:t});return s?t.nullable?Va({context:e,irSchema:n,schema:{...t,type:s},state:r}):mt({context:e,irSchema:n,schema:{...t,type:s},state:r}):n},mt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=ze({schema:r}),xr({irSchema:t,schema:r})),r.type){case "array":return qa({context:e,irSchema:t,schema:r,state:n});case "boolean":return va({irSchema:t});case "integer":case "number":return wa({irSchema:t,schema:r});case "object":return Ma({context:e,irSchema:t,schema:r,state:n});case "string":return Fa({irSchema:t});default:return po({irSchema:t,schema:r})}},po=({irSchema:e,schema:t})=>(e||(e=ze({schema:t})),e.type="unknown",xr({irSchema:e,schema:t}),e),K=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),"$ref"in t?Ba({context:e,schema:t,state:r}):t.enum?_a({context:e,schema:t,state:r}):t.allOf?Da({context:e,schema:t,state:r}):t.anyOf?La({context:e,schema:t,state:r}):t.oneOf?Ka({context:e,schema:t,state:r}):t.type||t.properties?Ua({context:e,schema:t,state:r}):po({schema:t})),co=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[_(e)]=K({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Wa=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",ft=({context:e,name:t,schema:r})=>{if(z(e.config.input.pagination).test(t))return  true;if("$ref"in r){let s=e.resolveRef(r.$ref);if("content"in s||"in"in s){let i;if("in"in s&&(i=s.schema),!i){let p=Ee({content:s.content});p?.schema&&(i=p.schema);}return i?ft({context:e,name:t,schema:i}):false}return ft({context:e,name:t,schema:s})}for(let s in r.properties)if(z(e.config.input.pagination).test(s)){let p=r.properties[s];if(typeof p!="boolean"&&!("$ref"in p)){let a=ct({schema:p});if(Wa(a))return s}}for(let s of r.allOf??[]){let i=ft({context:e,name:t,schema:s});if(i)return i}return  false};var Qa=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},Xa=({method:e,operation:t,path:r})=>{let n={id:t.id,method:e,path:r};return Qa({irOperation:n,operation:t}),n},Ha=({context:e,method:t,operation:r,path:n,securitySchemesMap:s})=>{let i=Xa({method:t,operation:r,path:n});if(r.parameters&&(i.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,a=Ee({content:p.content});if(a){let c=ft({context:e,name:"",schema:a.schema&&"$ref"in a.schema?{allOf:[{...a.schema}],description:p.description}:{description:p.description,...a.schema}});i.body={mediaType:a.mediaType,schema:K({context:e,schema:"$ref"in r.requestBody?{allOf:[{...r.requestBody}],description:p.description}:a.schema&&"$ref"in a.schema?{allOf:[{...a.schema}],description:p.description}:{description:p.description,...a.schema},state:void 0})},c&&(i.body.pagination=c),p.required&&(i.body.required=p.required),a.type&&(i.body.type=a.type);}}for(let p in r.responses){i.responses||(i.responses={});let a=r.responses[p],c="$ref"in a?e.resolveRef(a.$ref):a,m=Ee({content:c.content});m?i.responses[p]={mediaType:m.mediaType,schema:K({context:e,schema:{description:c.description,...ao({content:m})},state:void 0})}:i.responses[p]={schema:{description:c.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=[];for(let a of r.security)for(let c in a){let m=s.get(c);m&&p.push(m);}p.length&&(i.security=p);}return i},$e=({context:e,method:t,operation:r,operationIds:n,path:s,securitySchemesMap:i})=>{Et({context:e,id:r.operationId,method:t,operationIds:n,path:s}),e.ir.paths||(e.ir.paths={}),e.ir.paths[s]||(e.ir.paths[s]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),r.id=$t({context:e,id:r.operationId,method:t,path:s}),e.ir.paths[s][t]=Ha({context:e,method:t,operation:r,path:s,securitySchemesMap:i});};var za=e=>{switch(e){case "query":return  false;default:return}},Ja=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},Ga=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},de=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let s="$ref"in n?e.resolveRef(n.$ref):n;r[s.in]||(r[s.in]={}),r[s.in][s.name]=mo({context:e,parameter:s});}return r},mo=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=Ee({content:t.content});m&&(r=m.schema);}let n=r&&"$ref"in r?{allOf:[{...r}],deprecated:t.deprecated,description:t.description}:{deprecated:t.deprecated,description:t.description,...r},s=ft({context:e,name:t.name,schema:n}),i=t.style||Ga(t.in),p=t.explode!==void 0?t.explode:Ja(i),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:za(t.in),explode:p,location:t.in,name:t.name,schema:K({context:e,schema:n,state:void 0}),style:i};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),s&&(c.pagination=s),t.required&&(c.required=t.required),c},fo=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[_(e)]=mo({context:t,parameter:r});};var Za=({context:e,requestBody:t})=>{let r=Ee({content:t.content}),n=r?r.schema:void 0,s={description:t.description,...n},i={schema:K({context:e,schema:s,state:void 0})};return t.description&&(i.description=t.description),t.required&&(i.required=t.required),i},uo=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[_(e)]=Za({context:t,requestBody:r});};var lo=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=fe(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var ln=e=>{let t=new Map,r=new Map,n=je(e.config.input.exclude),s=je(e.config.input.include),i=(p,a)=>Nt({$ref:p,excludeFilters:n,includeFilters:s,schema:a});if(e.spec.components){for(let p in e.spec.components.securitySchemes){let a=e.spec.components.securitySchemes[p],c="$ref"in a?e.resolveRef(a.$ref):a;r.set(p,c);}for(let p in e.spec.components.parameters){let a=`#/components/parameters/${p}`,c=e.spec.components.parameters[p],m="$ref"in c?e.resolveRef(c.$ref):c;i(a,m)&&fo({$ref:a,context:e,parameter:m});}for(let p in e.spec.components.requestBodies){let a=`#/components/requestBodies/${p}`,c=e.spec.components.requestBodies[p],m="$ref"in c?e.resolveRef(c.$ref):c;i(a,m)&&uo({$ref:a,context:e,requestBody:m});}for(let p in e.spec.components.schemas){let a=`#/components/schemas/${p}`,c=e.spec.components.schemas[p];i(a,c)&&co({$ref:a,context:e,schema:c});}}lo({context:e});for(let p in e.spec.paths){let a=e.spec.paths[p],c=a.$ref?{...e.resolveRef(a.$ref),...a}:a,m={context:e,operation:{description:c.description,id:"",parameters:de({context:e,parameters:c.parameters}),security:e.spec.security,servers:c.servers,summary:c.summary},operationIds:t,path:p,securitySchemesMap:r},f=`#/paths${p}/delete`;c.delete&&i(f,c.delete)&&$e({...m,method:"delete",operation:{...m.operation,...c.delete,parameters:P({source:de({context:e,parameters:c.delete.parameters}),target:m.operation.parameters})}});let u=`#/paths${p}/get`;c.get&&i(u,c.get)&&$e({...m,method:"get",operation:{...m.operation,...c.get,parameters:P({source:de({context:e,parameters:c.get.parameters}),target:m.operation.parameters})}});let l=`#/paths${p}/head`;c.head&&i(l,c.head)&&$e({...m,method:"head",operation:{...m.operation,...c.head,parameters:P({source:de({context:e,parameters:c.head.parameters}),target:m.operation.parameters})}});let y=`#/paths${p}/options`;c.options&&i(y,c.options)&&$e({...m,method:"options",operation:{...m.operation,...c.options,parameters:P({source:de({context:e,parameters:c.options.parameters}),target:m.operation.parameters})}});let O=`#/paths${p}/patch`;c.patch&&i(O,c.patch)&&$e({...m,method:"patch",operation:{...m.operation,...c.patch,parameters:P({source:de({context:e,parameters:c.patch.parameters}),target:m.operation.parameters})}});let g=`#/paths${p}/post`;c.post&&i(g,c.post)&&$e({...m,method:"post",operation:{...m.operation,...c.post,parameters:P({source:de({context:e,parameters:c.post.parameters}),target:m.operation.parameters})}});let x=`#/paths${p}/put`;c.put&&i(x,c.put)&&$e({...m,method:"put",operation:{...m.operation,...c.put,parameters:P({source:de({context:e,parameters:c.put.parameters}),target:m.operation.parameters})}});let h=`#/paths${p}/trace`;c.trace&&i(h,c.trace)&&$e({...m,method:"trace",operation:{...m.operation,...c.trace,parameters:P({source:de({context:e,parameters:c.trace.parameters}),target:m.operation.parameters})}});}};var yo=({content:e})=>{let{mediaType:t,schema:r}=e;return r?r.type==="string"&&!r.format&&Ae({mediaType:t})?{...r,format:"binary"}:r:Ae({mediaType:t})?{format:"binary",type:"string"}:void 0},ke=({content:e})=>{for(let t in e)return {mediaType:t,schema:e[t].schema,type:kt({mediaType:t})}};var ye=({schema:e})=>typeof e.type=="string"?[e.type]:e.type?e.type:e.properties?["object"]:[],Ya=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Or=({irSchema:e,schema:t})=>{if(t.const!==void 0&&(e.const=t.const,!t.type))if(t.const===null)e.type="null";else switch(typeof t.const){case "bigint":case "number":e.type="number";break;case "boolean":e.type="boolean";break;case "string":e.type="string";break}t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum&&(e.exclusiveMaximum=t.exclusiveMaximum),t.exclusiveMinimum&&(e.exclusiveMinimum=t.exclusiveMinimum),t.format&&(e.format=t.format),t.maximum!==void 0&&(e.maximum=t.maximum),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minimum!==void 0&&(e.minimum=t.minimum),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=R(e.accessScopes,["read"])):t.writeOnly&&(e.accessScope="write",e.accessScopes=R(e.accessScopes,["write"]));},ep=({context:e,irSchema:t={},schema:r,state:n})=>{r.prefixItems&&r.prefixItems.length||r.maxItems&&r.maxItems===r.minItems||r.const!==void 0?t.type="tuple":t.type="array";let s=[];for(let i of r.prefixItems??[]){let p=D({context:e,schema:i,state:n});t.accessScopes=R(t.accessScopes,p.accessScopes),s.push(p);}if(r.items){let i=D({context:e,schema:r.items,state:n});if(t.accessScopes=R(t.accessScopes,i.accessScopes),!s.length&&r.maxItems&&r.maxItems===r.minItems)s=Array(r.maxItems).fill(i);else {let p=r.items.allOf||r.items.anyOf||r.items.oneOf;p&&p.length>1&&!ye({schema:r.items}).includes("null")?t={...t,...i}:s.push(i);}}return t=E({items:s,schema:t}),t},tp=({irSchema:e={}})=>(e.type="boolean",e),rp=({irSchema:e={}})=>(e.type="null",e),np=({irSchema:e={},schema:t})=>(e.type=t.type,e),sp=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let s={};for(let i in r.properties){let p=r.properties[i];if(typeof p!="boolean"){let a=D({context:e,schema:p,state:n});t.accessScopes=R(t.accessScopes,a.accessScopes),s[i]=a;}}if(Object.keys(s).length&&(t.properties=s),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let i=D({context:e,schema:r.additionalProperties,state:n});(t.properties||i.type!=="unknown")&&(t.additionalProperties=i);}return r.required&&(t.required=r.required),t},op=({irSchema:e={}})=>(e.type="string",e),qe=({schema:e})=>{let t={};return Ya({irSchema:t,schema:e}),t},ip=({context:e,schema:t,state:r})=>{let n=qe({schema:t}),s=[],i=ye({schema:t}),p=t.allOf;for(let a of p){let c=D({context:e,schema:a,state:r});if(n.accessScopes=R(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),s.push(c),a.$ref){let m=e.resolveRef(a.$ref);if(m.discriminator&&r.$ref){let f={properties:{[m.discriminator.propertyName]:{const:le(r.$ref,m.discriminator.mapping),type:"string"}},type:"object"};m.required?.includes(m.discriminator.propertyName)&&(f.required=[m.discriminator.propertyName]),s.push(f);}if(!r.circularReferenceTracker.has(a.$ref)){let f=D({context:e,schema:m,state:{...r,$ref:a.$ref}});n.accessScopes=R(n.accessScopes,f.accessScopes);}}}if(i.includes("object")){let a=ut({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties){for(let c of a.required??[])if(!a.properties[c])for(let m of p){let f=m.$ref?e.resolveRef(m.$ref):m;if(ye({schema:f}).includes("object")){let u=ut({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=R(n.accessScopes,u.accessScopes),u.properties?.[c]){a.properties[c]=u.properties[c];break}}}s.push(a);}}if(n=E({items:s,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),i.includes("null")){let a=[{type:"null"}];s.length&&a.unshift(n),n={items:a,logicalOperator:"or"};}return n},ap=({context:e,schema:t,state:r})=>{let n=qe({schema:t}),s=[],i=ye({schema:t}),p=t.anyOf;for(let a of p){let c=D({context:e,schema:a,state:r});n.accessScopes=R(n.accessScopes,c.accessScopes),t.discriminator&&a.$ref&&(c={items:[{properties:{[t.discriminator.propertyName]:{const:le(a.$ref,t.discriminator.mapping),type:"string"}},type:"object"},c],logicalOperator:"and"}),s.push(c);}if(i.includes("null")&&s.push({type:"null"}),n=E({items:s,mutateSchemaOneItem:true,schema:n}),i.includes("object")){let a=ut({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties&&(n={items:[n,a],logicalOperator:"and"});}return n},pp=({context:e,schema:t,state:r})=>{let n=qe({schema:t});n.type="enum";let s=[],i=ye({schema:t});for(let[p,a]of t.enum.entries()){let c=typeof a,m;if(c==="string"||c==="number"||c==="boolean"?m=c:a===null?i.includes("null")&&(m="null"):console.warn("\u{1F6A8}",`unhandled "${c}" typeof value "${a}" for enum`,t.enum),!m)continue;let f=ut({context:e,schema:{const:a,description:t["x-enum-descriptions"]?.[p],title:t["x-enum-varnames"]?.[p]??t["x-enumNames"]?.[p],type:m},state:r});n.accessScopes=R(n.accessScopes,f.accessScopes),s.push(f);}return n=E({items:s,schema:n}),n},cp=({context:e,schema:t,state:r})=>{let n=qe({schema:t}),s=[],i=ye({schema:t}),p=t.oneOf;for(let a of p){let c=D({context:e,schema:a,state:r});n.accessScopes=R(n.accessScopes,c.accessScopes),t.discriminator&&a.$ref&&(c={items:[{properties:{[t.discriminator.propertyName]:{const:le(a.$ref,t.discriminator.mapping),type:"string"}},type:"object"},c],logicalOperator:"and"}),c.logicalOperator==="or"&&c.items?s=s.concat(c.items):s.push(c);}if(i.includes("null")&&s.push({type:"null"}),n=E({items:s,mutateSchemaOneItem:true,schema:n}),i.includes("object")){let a=ut({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=R(n.accessScopes,a.accessScopes),a.properties&&(n={items:[n,a],logicalOperator:"and"});}return n},mp=({context:e,schema:t,state:r})=>{let n=qe({schema:t});if(n.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let s=e.resolveRef(t.$ref),i=D({context:e,schema:s,state:{...r,$ref:t.$ref}});n.accessScopes=R(n.accessScopes,i.accessScopes);}return n},ut=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=qe({schema:r}),Or({irSchema:t,schema:r})),r.type){case "array":return ep({context:e,irSchema:t,schema:r,state:n});case "boolean":return tp({irSchema:t});case "integer":case "number":return np({irSchema:t,schema:r});case "null":return rp({irSchema:t});case "object":return sp({context:e,irSchema:t,schema:r,state:n});case "string":return op({irSchema:t});default:return go({irSchema:t,schema:r})}},fp=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=qe({schema:r}));let s={};Or({irSchema:s,schema:r}),r.type.includes("null")&&s.default===null&&delete s.default;let i=[];for(let p of r.type)if(p==="null")i.push({type:"null"});else {let a=ut({context:e,irSchema:s,schema:{...r,type:p},state:n});t.accessScopes=R(t.accessScopes,a.accessScopes),i.push(a);}return t=E({items:i,schema:t}),t},up=({context:e,schema:t,state:r})=>{let n=qe({schema:t});Or({irSchema:n,schema:t});let s=ye({schema:t});return s.length===1?ut({context:e,irSchema:n,schema:{...t,type:s[0]},state:r}):fp({context:e,irSchema:n,schema:{...t,type:s},state:r})},go=({irSchema:e,schema:t})=>(e||(e=qe({schema:t})),e.type="unknown",Or({irSchema:e,schema:t}),e),D=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?mp({context:e,schema:t,state:r}):t.enum?pp({context:e,schema:t,state:r}):t.allOf?ip({context:e,schema:t,state:r}):t.anyOf?ap({context:e,schema:t,state:r}):t.oneOf?cp({context:e,schema:t,state:r}):t.type||t.properties?up({context:e,schema:t,state:r}):go({schema:t})),ho=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[_(e)]=D({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var xo=e=>e.includes("boolean")||e.includes("integer")||e.includes("number")||e.includes("string"),lt=({context:e,name:t,schema:r})=>{if(z(e.config.input.pagination).test(t))return  true;if(r.$ref){let s=e.resolveRef(r.$ref);if("content"in s||"in"in s){let i;if("in"in s&&(i=s.schema),!i){let p=ke({content:s.content});p?.schema&&(i=p.schema);}return i?lt({context:e,name:t,schema:i}):false}return lt({context:e,name:t,schema:s})}for(let s in r.properties)if(z(e.config.input.pagination).test(s)){let p=r.properties[s];if(typeof p!="boolean"){let a=ye({schema:p});if(!a.length){let m=(p.anyOf??p.oneOf??[]).filter(f=>f.type!=="null");if(m.length===1){let f=ye({schema:m[0]});if(xo(f))return s}}if(xo(a))return s}}for(let s of r.allOf??[]){let i=lt({context:e,name:t,schema:s});if(i)return i}return  false};var lp=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},dp=({method:e,operation:t,path:r})=>{let n={id:t.id,method:e,path:r};return lp({irOperation:n,operation:t}),n},yp=({context:e,method:t,operation:r,path:n,securitySchemesMap:s})=>{let i=dp({method:t,operation:r,path:n});if(r.parameters&&(i.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,a=ke({content:p.content});if(a){let c=lt({context:e,name:"",schema:{description:p.description,...a.schema}});i.body={mediaType:a.mediaType,schema:D({context:e,schema:{description:p.description,..."$ref"in r.requestBody?r.requestBody:a.schema},state:void 0})},c&&(i.body.pagination=c),p.required&&(i.body.required=p.required),a.type&&(i.body.type=a.type);}}for(let p in r.responses){i.responses||(i.responses={});let a=r.responses[p],c="$ref"in a?e.resolveRef(a.$ref):a,m=ke({content:c.content});m?i.responses[p]={mediaType:m.mediaType,schema:D({context:e,schema:{description:c.description,...yo({content:m})},state:void 0})}:i.responses[p]={schema:{description:c.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=[];for(let a of r.security)for(let c in a){let m=s.get(c);m&&p.push(m);}p.length&&(i.security=p);}return i},ve=({context:e,method:t,operation:r,operationIds:n,path:s,securitySchemesMap:i})=>{Et({context:e,id:r.operationId,method:t,operationIds:n,path:s}),e.ir.paths||(e.ir.paths={}),e.ir.paths[s]||(e.ir.paths[s]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),r.id=$t({context:e,id:r.operationId,method:t,path:s}),e.ir.paths[s][t]=yp({context:e,method:t,operation:r,path:s,securitySchemesMap:i});};var gp=e=>{switch(e){case "query":return  false;default:return}},hp=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},xp=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},ge=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let s="$ref"in n?e.resolveRef(n.$ref):n;r[s.in]||(r[s.in]={}),r[s.in][s.name]=Oo({context:e,parameter:s});}return r},Oo=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=ke({content:t.content});m&&(r=m.schema);}let n={deprecated:t.deprecated,description:t.description,...r},s=lt({context:e,name:t.name,schema:n}),i=t.style||xp(t.in),p=t.explode!==void 0?t.explode:hp(i),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:gp(t.in),explode:p,location:t.in,name:t.name,schema:D({context:e,schema:n,state:void 0}),style:i};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),s&&(c.pagination=s),t.required&&(c.required=t.required),c},bo=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[_(e)]=Oo({context:t,parameter:r});};var Op=({context:e,requestBody:t})=>{let r=ke({content:t.content}),n=r?r.schema:void 0,s={description:t.description,...n},i={schema:D({context:e,schema:s,state:void 0})};return t.description&&(i.description=t.description),t.required&&(i.required=t.required),i},So=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[_(e)]=Op({context:t,requestBody:r});};var Ro=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=fe(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var dn=e=>{let t=new Map,r=new Map,n=je(e.config.input.exclude),s=je(e.config.input.include),i=(p,a)=>Nt({$ref:p,excludeFilters:n,includeFilters:s,schema:a});if(e.spec.components){for(let p in e.spec.components.securitySchemes){let a=e.spec.components.securitySchemes[p],c="$ref"in a?e.resolveRef(a.$ref):a;r.set(p,c);}for(let p in e.spec.components.parameters){let a=`#/components/parameters/${p}`,c=e.spec.components.parameters[p],m="$ref"in c?e.resolveRef(c.$ref):c;i(a,m)&&bo({$ref:a,context:e,parameter:m});}for(let p in e.spec.components.requestBodies){let a=`#/components/requestBodies/${p}`,c=e.spec.components.requestBodies[p],m="$ref"in c?e.resolveRef(c.$ref):c;i(a,m)&&So({$ref:a,context:e,requestBody:m});}for(let p in e.spec.components.schemas){let a=`#/components/schemas/${p}`,c=e.spec.components.schemas[p];i(a,c)&&ho({$ref:a,context:e,schema:c});}}Ro({context:e});for(let p in e.spec.paths){let a=e.spec.paths[p],c=a.$ref?{...e.resolveRef(a.$ref),...a}:a,m={context:e,operation:{description:c.description,id:"",parameters:ge({context:e,parameters:c.parameters}),security:e.spec.security,servers:c.servers,summary:c.summary},operationIds:t,path:p,securitySchemesMap:r},f=`#/paths${p}/delete`;c.delete&&i(f,c.delete)&&ve({...m,method:"delete",operation:{...m.operation,...c.delete,parameters:P({source:ge({context:e,parameters:c.delete.parameters}),target:m.operation.parameters})}});let u=`#/paths${p}/get`;c.get&&i(u,c.get)&&ve({...m,method:"get",operation:{...m.operation,...c.get,parameters:P({source:ge({context:e,parameters:c.get.parameters}),target:m.operation.parameters})}});let l=`#/paths${p}/head`;c.head&&i(l,c.head)&&ve({...m,method:"head",operation:{...m.operation,...c.head,parameters:P({source:ge({context:e,parameters:c.head.parameters}),target:m.operation.parameters})}});let y=`#/paths${p}/options`;c.options&&i(y,c.options)&&ve({...m,method:"options",operation:{...m.operation,...c.options,parameters:P({source:ge({context:e,parameters:c.options.parameters}),target:m.operation.parameters})}});let O=`#/paths${p}/patch`;c.patch&&i(O,c.patch)&&ve({...m,method:"patch",operation:{...m.operation,...c.patch,parameters:P({source:ge({context:e,parameters:c.patch.parameters}),target:m.operation.parameters})}});let g=`#/paths${p}/post`;c.post&&i(g,c.post)&&ve({...m,method:"post",operation:{...m.operation,...c.post,parameters:P({source:ge({context:e,parameters:c.post.parameters}),target:m.operation.parameters})}});let x=`#/paths${p}/put`;c.put&&i(x,c.put)&&ve({...m,method:"put",operation:{...m.operation,...c.put,parameters:P({source:ge({context:e,parameters:c.put.parameters}),target:m.operation.parameters})}});let h=`#/paths${p}/trace`;c.trace&&i(h,c.trace)&&ve({...m,method:"trace",operation:{...m.operation,...c.trace,parameters:P({source:ge({context:e,parameters:c.trace.parameters}),target:m.operation.parameters})}});}};var br="#/components/schemas/";var Je=({config:e,name:t})=>e.plugins["@hey-api/sdk"]?.serviceNameBuilder?e.plugins["@hey-api/sdk"].serviceNameBuilder.replace("{{name}}",t):t,Io=e=>b().plugins["@hey-api/typescript"]?.style==="PascalCase"?j({case:"PascalCase",value:e}):e,To=e=>{let t=Io(e);return at(t).replace(ie,"_$1")};function we(e,t,r){return r.indexOf(e)===t}function yn(e,t){let r=e.toLocaleLowerCase(),n=t.toLocaleLowerCase();return r.localeCompare(n,"en")}var Qt=(e,t)=>yn(e.name,t.name);function Ao(e){return e.sort(Qt)}var Rp=(e,t)=>{if(t)return t;if(typeof e=="number")return `'_${e}'`;let r="";return typeof e=="string"&&(r=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_").replace(/^([^$_\p{ID_Start}])/u,"_$1").replace(/(\p{Lowercase})(\p{Uppercase}+)/gu,"$1_$2")),r=r.trim(),r||(r="empty_string"),r.toUpperCase()},No=e=>e.map(t=>Sr(t.value,true)).filter(we).join(" | "),Sr=(e,t=false)=>typeof e=="string"?e.includes("'")&&t?`"${e}"`:`'${e}'`:e,gn=e=>{let t=Rp(e.value,e.customName),r=Sr(e.value);return {key:t,value:r}};var hn=e=>{let t=To(e);return {$ref:br+e,name:t}};var Xt=e=>e.format==="date"||e.format==="date-time",xn=e=>{let t=b();return e.base==="binary"?o.typeUnionNode({types:["Blob","File"]}):t.plugins["@hey-api/transformers"]?.dates&&Xt(e)?o.typeNode("Date"):o.typeNode(e.base)},Ip=e=>{let t=e.base==="null"?false:e.isNullable,r=xn(e);if(e.export==="reference"&&e.$refs.length===1&&e.$refs[0].startsWith(br)){let s=hn(e.base);r=o.typeNode(s.name);}return o.typeUnionNode({isNullable:t,types:[r]})},Tp=e=>{if(e.link){if(Array.isArray(e.link)){let t=e.link.map(n=>ee(n));return o.typeTupleNode({isNullable:e.isNullable,types:t})}if(e.export==="array"&&e.maxItems&&e.minItems&&e.maxItems===e.minItems&&e.maxItems<=100){let t=Array(e.maxItems).fill(ee(e.link));return o.typeTupleNode({isNullable:e.isNullable,types:t})}return o.typeArrayNode([ee(e.link)],e.isNullable)}return o.typeArrayNode([xn(e)],e.isNullable)},Cp=e=>{let t=e.enum.map(r=>Sr(r.value));return o.typeUnionNode({isNullable:e.isNullable,types:t})},Pp=e=>{let t=e.link&&!Array.isArray(e.link)?ee(e.link):xn(e);return o.typeRecordNode(["string"],[t],e.isNullable,true)},Eo=({model:e,style:t})=>{let r=e.properties.map(s=>o.nodeToString({node:ee(s),unescape:true})).filter(we),n=t==="union"?o.typeUnionNode({isNullable:e.isNullable&&!e.properties.find(s=>s.isNullable),types:r}):o.typeIntersectionNode({isNullable:e.isNullable,types:r});return e.meta?n:o.typeParenthesizedNode({type:n})},jp=e=>{if(!e.properties.length)return o.typeNode("unknown");let t=b(),r=w(t),n=e.properties.map(s=>{let i=s.isRequired?"":"?",p=ee(s),a=r?/^\dXX$/.test(s.name)?Ce(s.name):s.name:Ce(Ft(ko(s.name)));return s.name==="[key: string]"&&(a=s.name,i&&(i="",p=o.typeUnionNode({types:[p,"undefined"]}))),{comment:[s.description&&N(s.description),s.deprecated&&"@deprecated"],isReadOnly:s.isReadOnly,isRequired:i==="",name:a,type:p}});return o.typeInterfaceNode({isNullable:e.isNullable,properties:n,useLegacyResolution:true})},ee=e=>{switch(e.export){case "all-of":return Eo({model:e,style:"intersection"});case "any-of":case "one-of":return Eo({model:e,style:"union"});case "array":return Tp(e);case "dictionary":return Pp(e);case "enum":return Cp(e);case "interface":return jp(e);case "const":case "generic":case "reference":default:return Ip(e)}},te=({client:e,count:t=1,create:r=false,meta:n,nameTransformer:s})=>{let i={created:false,name:""},p=n.name;s&&(p=s(p)),t>1&&(p=`${p}${t}`);let a=e.types[p];return a?a.$ref===n.$ref?i={created:false,name:p}:i=te({client:e,count:t+1,create:r,meta:n,nameTransformer:s}):r&&(e.types[p]=n,i={created:true,name:p}),i},$o=({client:e,name:t})=>{let r={deleted:false,name:""};return e.types[t]&&(delete e.types[t],r={deleted:true,name:t}),r},ko=e=>{let t=b();return w(t)?j({case:"camelCase",value:mn(e)}).replace(ie,"_$1"):e};var vt=e=>`${e.method.toUpperCase()} ${e.path}`;var xe=e=>e.some(r=>r.isRequired);var Qp=({config:e,spec:t})=>{let r=new gr({config:e,spec:t});if("swagger"in r.spec)return un(r),r;switch(r.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":return ln(r),r;case "3.1.0":case "3.1.1":return dn(r),r;}throw new Error("Unsupported OpenAPI specification")};var Sn=(e,t)=>{let r=b();if(Array.isArray(e))return e.map(s=>Sn(s));if(typeof e!="object"||e===null)return e;let n={...e};return Object.entries(n).forEach(([s,i])=>{if(r.plugins["@hey-api/schemas"]?.type==="form"&&["description","x-enum-descriptions","x-enum-varnames","x-enumNames","title"].includes(s)&&t!=="properties"){delete n[s];return}s==="$ref"&&typeof i=="string"&&(n[s]=decodeURIComponent(i)),i&&typeof i=="object"&&(n[s]=Sn(i,s));}),n},Xp=(e,t)=>{let r=b(),n=at(e);return r.plugins["@hey-api/schemas"]?.nameBuilder?r.plugins["@hey-api/schemas"].nameBuilder(n,t):`${n}Schema`},vo=({files:e,openApi:t})=>{let r=b();e.schemas=new ue({dir:r.output.path,name:"schemas.ts"});let n=(s,i)=>{let p=Sn(i),a=o.objectExpression({obj:p}),c=o.constVariable({assertion:"const",exportConst:true,expression:a,name:Xp(s,i)});e.schemas.add(c);};"swagger"in t&&Object.entries(t.definitions??{}).forEach(([s,i])=>{n(s,i);}),"openapi"in t&&Object.entries(t.components?.schemas??{}).forEach(([s,i])=>{n(s,i);});};var Rn={_handler:Qs,_handlerLegacy:vo,exportFromIndex:false,name:"@hey-api/schemas",nameBuilder:e=>`${e}Schema`,output:"schemas",type:"json"};var Ze=e=>{for(let t in e)if(e[t].required)return  true;return  false},wo=e=>e?!!(Ze(e.cookie)||Ze(e.header)||Ze(e.path)||Ze(e.query)):false,In=e=>{if(e){for(let t in e.cookie){let r=e.cookie[t];if(r.pagination)return {in:r.location,name:r.pagination===true?t:`${t}.${r.pagination}`,schema:r.pagination===true?r.schema:r.schema.properties[r.pagination]}}for(let t in e.header){let r=e.header[t];if(r.pagination)return {in:r.location,name:r.pagination===true?t:`${t}.${r.pagination}`,schema:r.pagination===true?r.schema:r.schema.properties[r.pagination]}}for(let t in e.path){let r=e.path[t];if(r.pagination)return {in:r.location,name:r.pagination===true?t:`${t}.${r.pagination}`,schema:r.pagination===true?r.schema:r.schema.properties[r.pagination]}}for(let t in e.query){let r=e.query[t];if(r.pagination)return {in:r.location,name:r.pagination===true?t:`${t}.${r.pagination}`,schema:r.pagination===true?r.schema:r.schema.properties[r.pagination]}}}};var Oe=({schema:e})=>{if(!e.items)return e;let t=[],r=[];for(let n of e.items){if(!n.type&&n.items){t.push(n);continue}if(!n.type||n.type==="boolean"||n.type==="integer"||n.type==="null"||n.type==="number"||n.type==="string"||n.type==="unknown"||n.type==="void"){let s=`${n.$ref??""}${n.type??""}${n.const!==void 0?`const-${n.const}`:""}`;r.includes(s)||(r.push(s),t.push(n));continue}t.push(n);}if(e.items=t,e.items.length<=1&&e.type!=="array"&&e.type!=="enum"&&e.type!=="tuple"){let n=e.items[0];delete e.logicalOperator,delete e.items,e={...e,...n};}return e.type==="unknown"?{}:e};var Me=e=>!!(wo(e.parameters)||e.body?.required),Mo=({context:e,operation:t})=>{let r=t.body;if(!r||!r.pagination)return In(t.parameters);if(r.pagination===true)return {in:"body",name:"body",schema:r.schema};let n=r.schema,s=n.$ref?e.resolveIrRef(n.$ref):n,p=("schema"in s?s.schema:s)?.properties?.[r.pagination];return p?{in:"body",name:r.pagination,schema:p}:In(t.parameters)},Tn=({statusCode:e})=>{switch(e){case "1XX":return "1XX";case "2XX":return "2XX";case "3XX":return "3XX";case "4XX":return "4XX";case "5XX":return "5XX";case "default":return "default";default:return `${e[0]}XX`}},Ye=e=>{let t={};if(!e.responses)return t;let r={properties:{},type:"object"},n={properties:{},type:"object"},s;for(let a in e.responses){let c=e.responses[a];switch(Tn({statusCode:a})){case "1XX":case "3XX":break;case "2XX":n.properties[a]=c.schema;break;case "4XX":case "5XX":r.properties[a]=c.schema;break;case "default":s=c;break}}if(s){let a=false;Object.keys(n.properties).length||(n.properties.default=s.schema,a=true);let c=(s.schema.description??"").toLocaleLowerCase(),m=(s.schema.$ref??"").toLocaleLowerCase();["success"].some(l=>c.includes(l)||m.includes(l))&&(n.properties.default=s.schema,a=true),["error","problem"].some(l=>c.includes(l)||m.includes(l))&&(r.properties.default=s.schema,a=true),a||(r.properties.default=s.schema);}let i=Object.keys(r.properties);if(i.length){r.required=i,t.errors=r;let a=E({items:Object.values(r.properties),mutateSchemaOneItem:true,schema:{}});a=Oe({schema:a}),Object.keys(a).length&&a.type!=="unknown"&&(t.error=a);}let p=Object.keys(n.properties);if(p.length){n.required=p,t.responses=n;let a=E({items:Object.values(n.properties),mutateSchemaOneItem:true,schema:{}});a=Oe({schema:a}),Object.keys(a).length&&a.type!=="unknown"&&(t.response=a);}return t};var Rr=e=>j({case:"PascalCase",value:pt(e)});var zt="zod",Hp=o.identifier({text:"coerce"}),zp=o.identifier({text:"default"}),Jp=o.identifier({text:"intersection"}),Gp=o.identifier({text:"lazy"}),Lo=o.identifier({text:"length"}),Ir=o.identifier({text:"literal"}),_o=o.identifier({text:"max"}),Zp=o.identifier({text:"merge"}),Ko=o.identifier({text:"min"}),Yp=o.identifier({text:"optional"}),ec=o.identifier({text:"readonly"}),tc=o.identifier({text:"regex"}),rc=o.identifier({text:"union"}),$=o.identifier({text:"z"}),Cn=e=>`z-${e}`,nc=({context:e,result:t,schema:r})=>{let n=o.propertyAccessExpression({expression:$,name:o.identifier({text:r.type})}),s;if(!r.items)s=o.callExpression({functionName:n,parameters:[Ht({schema:{type:"unknown"}})]});else {r=Oe({schema:r});let i=r.items.map(p=>dt({context:e,result:t,schema:p}));i.length===1?s=o.callExpression({functionName:n,parameters:i}):(r.logicalOperator,s=o.callExpression({functionName:n,parameters:[Ht({schema:{type:"unknown"}})]}));}return r.minItems===r.maxItems&&r.minItems!==void 0?s=o.callExpression({functionName:o.propertyAccessExpression({expression:s,name:Lo}),parameters:[o.valueToExpression({value:r.minItems})]}):(r.minItems!==void 0&&(s=o.callExpression({functionName:o.propertyAccessExpression({expression:s,name:Ko}),parameters:[o.valueToExpression({value:r.minItems})]})),r.maxItems!==void 0&&(s=o.callExpression({functionName:o.propertyAccessExpression({expression:s,name:_o}),parameters:[o.valueToExpression({value:r.maxItems})]}))),s},sc=({schema:e})=>typeof e.const=="boolean"?o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:Ir}),parameters:[o.ots.boolean(e.const)]}):o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:o.identifier({text:e.type})})}),oc=({context:e,schema:t})=>{let r=[];for(let s of t.items??[])s.type==="string"&&typeof s.const=="string"&&r.push(o.stringLiteral({text:s.const}));return r.length?o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:o.identifier({text:t.type})}),parameters:[o.arrayLiteralExpression({elements:r,multiLine:false})]}):Ht({schema:{type:"unknown"}})},ic=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:o.identifier({text:e.type})})}),ac=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:o.identifier({text:e.type})})}),pc=({schema:e})=>{let t=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:Ir}),parameters:[o.ots.number(e.const)]});let r=o.callExpression({functionName:t?o.propertyAccessExpression({expression:o.propertyAccessExpression({expression:$,name:Hp}),name:o.identifier({text:"bigint"})}):o.propertyAccessExpression({expression:$,name:o.identifier({text:"number"})})});return !t&&e.type==="integer"&&(r=o.callExpression({functionName:o.propertyAccessExpression({expression:r,name:o.identifier({text:"int"})})})),e.exclusiveMinimum!==void 0?r=o.callExpression({functionName:o.propertyAccessExpression({expression:r,name:o.identifier({text:"gt"})}),parameters:[o.valueToExpression({value:e.exclusiveMinimum})]}):e.minimum!==void 0&&(r=o.callExpression({functionName:o.propertyAccessExpression({expression:r,name:o.identifier({text:"gte"})}),parameters:[o.valueToExpression({value:e.minimum})]})),e.exclusiveMaximum!==void 0?r=o.callExpression({functionName:o.propertyAccessExpression({expression:r,name:o.identifier({text:"lt"})}),parameters:[o.valueToExpression({value:e.exclusiveMaximum})]}):e.maximum!==void 0&&(r=o.callExpression({functionName:o.propertyAccessExpression({expression:r,name:o.identifier({text:"lte"})}),parameters:[o.valueToExpression({value:e.maximum})]})),r},cc=({context:e,result:t,schema:r})=>{let n=[],s=r.required??[];for(let p in r.properties){let a=r.properties[p],c=s.includes(p),m=dt({context:e,optional:!c,result:t,schema:a});Te.lastIndex=0;let f=Te.test(p)?d__default.default.factory.createNumericLiteral(p):p;(p.match(/^[0-9]/)&&p.match(/\D+/g)||p.match(/\W/g))&&!p.startsWith("'")&&!p.endsWith("'")&&(f=`'${p}'`),n.push(o.propertyAssignment({initializer:m,name:f}));}return o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:o.identifier({text:r.type})}),parameters:[d__default.default.factory.createObjectLiteralExpression(n,true)]})},mc=({schema:e})=>{if(typeof e.const=="string")return o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:Ir}),parameters:[o.ots.string(e.const)]});let t=o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:o.identifier({text:e.type})})});if(e.format)switch(e.format){case "date-time":t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:o.identifier({text:"datetime"})})});break;case "ipv4":case "ipv6":t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:o.identifier({text:"ip"})})});break;case "uri":t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:o.identifier({text:"url"})})});break;case "date":case "email":case "time":case "uuid":t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:o.identifier({text:e.format})})});break}return e.minLength===e.maxLength&&e.minLength!==void 0?t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:Lo}),parameters:[o.valueToExpression({value:e.minLength})]}):(e.minLength!==void 0&&(t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:Ko}),parameters:[o.valueToExpression({value:e.minLength})]})),e.maxLength!==void 0&&(t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:_o}),parameters:[o.valueToExpression({value:e.maxLength})]}))),e.pattern&&(t=o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:tc}),parameters:[o.regularExpressionLiteral({text:e.pattern})]})),t},fc=({context:e,schema:t})=>{if(t.const&&Array.isArray(t.const)){let r=t.const.map(s=>o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:Ir}),parameters:[o.valueToExpression({value:s})]}));return o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:o.identifier({text:"tuple"})}),parameters:[o.arrayLiteralExpression({elements:r})]})}return Ht({schema:{type:"unknown"}})},uc=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:o.identifier({text:e.type})})}),Ht=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:o.identifier({text:e.type})})}),lc=({schema:e})=>o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:o.identifier({text:e.type})})}),Do=({context:e,result:t,schema:r})=>{switch(r.type){case "array":return nc({context:e,result:t,schema:r});case "boolean":return sc({schema:r});case "enum":return oc({context:e,schema:r});case "integer":case "number":return pc({schema:r});case "never":return ic({schema:r});case "null":return ac({schema:r});case "object":return cc({context:e,result:t,schema:r});case "string":return mc({schema:r});case "tuple":return fc({context:e,schema:r});case "undefined":return uc({schema:r});case "unknown":return Ht({schema:r});case "void":return lc({schema:r})}},dc=({context:e,operation:t,result:r})=>{if(t.responses){let{response:n}=Ye(t);n&&dt({$ref:v({case:"camelCase",id:t.id,type:"response"}),context:e,result:r,schema:n});}},dt=({$ref:e,context:t,optional:r,result:n,schema:s})=>{let i=t.file({id:zt}),p,a;if(e&&(n.circularReferenceTracker.add(e),a=i.identifier({$ref:e,create:true,nameTransformer:Cn,namespace:"value"})),s.$ref){let c=n.circularReferenceTracker.has(s.$ref),m=i.identifier({$ref:s.$ref,nameTransformer:Cn,namespace:"value"});if(!m.name){let f=t.resolveIrRef(s.$ref);p=dt({context:t,result:n,schema:f}),m=i.identifier({$ref:s.$ref,nameTransformer:Cn,namespace:"value"});}if(m.name){let f=o.identifier({text:m.name});c?(p=o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:Gp}),parameters:[o.arrowFunction({statements:[o.returnStatement({expression:f})]})]}),n.hasCircularReference=true):p=f;}}else if(s.type)p=Do({context:t,result:n,schema:s});else if(s.items)if(s=Oe({schema:s}),s.items){let c=s.items.map(m=>dt({context:t,result:n,schema:m}));if(s.logicalOperator==="and"){let m=s.items[0];m.logicalOperator==="or"||m.type&&m.type!=="object"?p=o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:Jp}),parameters:c}):(p=c[0],c.slice(1).forEach(f=>{p=o.callExpression({functionName:o.propertyAccessExpression({expression:p,name:Zp}),parameters:[f]});}));}else p=o.callExpression({functionName:o.propertyAccessExpression({expression:$,name:rc}),parameters:[o.arrayLiteralExpression({elements:c})]});}else p=dt({context:t,result:n,schema:s});else p=Do({context:t,result:n,schema:{type:"unknown"}});if(e&&n.circularReferenceTracker.delete(e),p&&(s.accessScope==="read"&&(p=o.callExpression({functionName:o.propertyAccessExpression({expression:p,name:ec})})),r&&(p=o.callExpression({functionName:o.propertyAccessExpression({expression:p,name:Yp})})),s.default!==void 0)){let c=o.valueToExpression({value:s.default});c&&(p=o.callExpression({functionName:o.propertyAccessExpression({expression:p,name:zp}),parameters:[c]}));}if(a?.name){let c=o.constVariable({exportConst:true,expression:p,name:a.name,typeName:n.hasCircularReference?o.propertyAccessExpression({expression:$,name:"ZodTypeAny"}):void 0});i.add(c);}return p},Bo=({context:e,plugin:t})=>{e.createFile({exportFromIndex:t.exportFromIndex,id:zt,identifierCase:"camelCase",path:t.output}).import({module:"zod",name:"z"}),e.subscribe("operation",({operation:n})=>{dc({context:e,operation:n,result:{circularReferenceTracker:new Set,hasCircularReference:false}});}),e.subscribe("schema",({$ref:n,schema:s})=>{dt({$ref:n,context:e,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:s});});};var yc=({dataExpression:e})=>{let t=e!==void 0?o.callExpression({functionName:"BigInt",parameters:[o.callExpression({functionName:o.propertyAccessExpression({expression:e,name:"toString"})})]}):void 0;if(t){if(typeof e=="string")return [t];if(e)return [o.assignment({left:e,right:t})]}return []},gc=({dataExpression:e})=>{let t=o.identifier({text:"Date"});return typeof e=="string"?[o.newExpression({argumentsArray:[o.identifier({text:e})],expression:t})]:e?[o.assignment({left:e,right:o.newExpression({argumentsArray:[e],expression:t})})]:[]},Tr=({id:e,type:t})=>{let r="";switch(t){case "data":r="DataResponseTransformer";break;case "error":r="ErrorResponseTransformer";break;case "response":r="ResponseTransformer";break}return `${Ct}${j({case:"camelCase",value:e})}${r}`},hc=({$ref:e,type:t})=>{let r="";switch(t){case "response":r="SchemaResponseTransformer";break}let n=e.split("/");return `${n.slice(0,n.length-1).join("/")}/${j({case:"camelCase",value:n[n.length-1]})}${r}`},Vo=({$ref:e})=>hc({$ref:e,type:"response"}),Zt="transformers",Cr="data",Jt=e=>e.map(t=>d__default.default.isStatement(t)?t:o.expressionToStatement({expression:t})),Wo=({node:e})=>e.kind===d__default.default.SyntaxKind.ReturnStatement,Qo=({context:e,plugin:t,schema:r})=>{let n=o.identifier({text:Cr}),s=Gt({context:e,dataExpression:n,plugin:t,schema:r});return s.length&&!Wo({node:s[s.length-1]})&&s.push(o.returnStatement({expression:n})),s},Gt=({context:e,dataExpression:t,plugin:r,schema:n})=>{let s=e.file({id:Zt});if(n.$ref){let i=s.identifier({$ref:Vo({$ref:n.$ref}),create:true,namespace:"value"});if(i.created&&i.name){let p=e.resolveIrRef(n.$ref),a=Qo({context:e,plugin:r,schema:p});if(a.length){let c=o.constVariable({expression:o.arrowFunction({async:false,multiLine:true,parameters:[{name:Cr,type:o.keywordTypeNode({keyword:"any"})}],statements:Jt(a)}),name:i.name});s.add(c);}else i=s.blockIdentifier({$ref:Vo({$ref:n.$ref}),namespace:"value"});}if(i.name){let p=o.callExpression({functionName:i.name,parameters:[t]});if(t)return typeof t=="string"&&t==="item"?[o.returnStatement({expression:p})]:[typeof t=="string"?p:o.assignment({left:t,right:p})]}return []}if(n.type==="array"){if(!t||typeof t=="string")return [];let i=n.items?Gt({context:e,dataExpression:"item",plugin:r,schema:n.items?.[0]?n.items[0]:{...n,type:void 0}}):[];if(!i.length)return [];let p=Jt(i);return p.some(c=>Wo({node:c}))||p.push(o.returnStatement({expression:o.identifier({text:"item"})})),[o.assignment({left:t,right:o.callExpression({functionName:o.propertyAccessExpression({expression:t,name:"map"}),parameters:[o.arrowFunction({multiLine:true,parameters:[{name:"item",type:"any"}],statements:p})]})})]}if(n.type==="object"){let i=[],p=n.required??[];for(let a in n.properties){let c=n.properties[a],m=o.propertyAccessExpression({expression:t||Cr,name:a}),f=Gt({context:e,dataExpression:m,plugin:r,schema:c});if(!f.length)continue;let u=!c.items?.find(y=>y.type==="null");p.includes(a)&&u?i=i.concat(f):i.push(o.ifStatement({expression:m,thenStatement:o.block({statements:Jt(f)})}));}return i}if(r.dates&&n.type==="string"&&(n.format==="date"||n.format==="date-time"))return gc({dataExpression:t});if(r.bigInt&&n.type==="integer"&&n.format==="int64")return yc({dataExpression:t});if(n.items){if(n.items.length===1)return Gt({context:e,dataExpression:"item",plugin:r,schema:n.items[0]});let i=[];if(n.logicalOperator==="and"||n.items.length===2&&n.items.find(p=>p.type==="null"||p.type==="void")){for(let p of n.items){let a=Gt({context:e,dataExpression:t||"item",plugin:r,schema:p});if(a.length)if(t)i=i.concat(a);else {let c=o.identifier({text:"item"});i.push(o.ifStatement({expression:c,thenStatement:o.block({statements:Jt(a)})}),o.returnStatement({expression:c}));}}return i}n.type!=="enum"&&console.warn(`\u2757\uFE0F Transformers warning: schema ${JSON.stringify(n)} is too complex and won't be currently processed. This will likely produce an incomplete transformer which is not what you want. Please open an issue if you'd like this improved https://github.com/hey-api/openapi-ts/issues`);}return []},Xo=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:Zt,path:t.output});e.subscribe("operation",({operation:n})=>{let{response:s}=Ye(n);if(!s)return;if(s.items&&s.items.length>1){e.config.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${`${n.method.toUpperCase()} ${n.path}`} has ${s.items.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);return}let i=e.file({id:I}).identifier({$ref:v({id:n.id,type:"response"}),namespace:"type"});if(!i.name)return;let p=r.identifier({$ref:Tr({id:n.id,type:"response"}),create:true,namespace:"value"});if(!p.name)return;let a=Qo({context:e,plugin:t,schema:s});if(a.length){r.import({asType:true,module:r.relativePathToFile({context:e,id:I}),name:i.name});let c=o.constVariable({exportConst:true,expression:o.arrowFunction({async:true,multiLine:true,parameters:[{name:Cr,type:o.keywordTypeNode({keyword:"any"})}],returnType:o.typeReferenceNode({typeArguments:[o.typeReferenceNode({typeName:i.name})],typeName:"Promise"}),statements:Jt(a)}),name:p.name});r.add(c);}else p=r.blockIdentifier({$ref:Tr({id:n.id,type:"response"}),namespace:"value"});});};var Yt="TComposable",Fe="DefaultT",Pn="ResT";var yt=({meta:e,onImport:t,...r})=>{if(!e)return {created:false,name:""};let{created:n,name:s}=te({meta:e,...r});return s&&t(s),{created:n,name:s}},Zo=e=>`${e}ModelResponseTransformer`,gt=e=>`${j({case:"PascalCase",value:e})}Data`,wt=e=>`${j({case:"PascalCase",value:e})}Error`,jn=e=>`${e}Transformer`,be=e=>`${j({case:"PascalCase",value:e})}Response`,An=({importedType:e,throwOnError:t})=>{let r=q.OptionsLegacyParser.name;return t?`${r}<${e||"unknown"}, ${t}>`:e?`${r}<${e}>`:r},Ho=(e,t)=>{let r=b(),{name:n}=te({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:gt}),s=xe(t.parameters);if(!w(r))return [{isRequired:s,name:"options",type:An({importedType:n,throwOnError:"ThrowOnError"})}];if(!t.parameters.length)return [];let i=p=>{if(p.default!==void 0)return JSON.stringify(p.default,null,4)};return r.useOptions?[{default:s?void 0:{},name:"data",type:n}]:t.parameters.map(p=>{let a=`${n}['${p.name}']`;return {default:p?.default,isRequired:(!p.isRequired&&!i(p)?"?":"")=="",name:p.name,type:a}})},zo=(e,t)=>{let r=b(),n=o.typeNode("void");if(t.responses.filter(p=>p.responseTypes.includes("success")).length){let{name:p}=te({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:be});n=o.typeUnionNode({types:[p]});}return r.useOptions&&r.plugins["@hey-api/sdk"]?.response==="response"&&(n=o.typeNode("ApiResult",[n])),T(r).name==="legacy/angular"?n=o.typeNode("Observable",[n]):n=o.typeNode("CancelablePromise",[n]),n},Jo=e=>{let t=b();if(!w(t))return [e.deprecated&&"@deprecated",e.summary&&N(e.summary),e.description&&N(e.description)];let r=[];e.parameters.length&&(t.useOptions?r=["@param data The data for the request.",...e.parameters.map(i=>`@param data.${i.name} ${i.description?N(i.description):""}`)]:r=e.parameters.map(i=>`@param ${i.name} ${i.description?N(i.description):""}`));let n=e.responses.filter(i=>i.responseTypes.includes("success"));return [e.deprecated&&"@deprecated",e.summary&&N(e.summary),e.description&&N(e.description),...r,...n.map(i=>`@returns ${i.type} ${i.description?N(i.description):""}`),"@throws ApiError"]},xc=({client:e,onClientImport:t,onImport:r,operation:n})=>{let s=b(),i=be(n.name),{name:p}=te({client:e,meta:{$ref:`transformers/${i}`,name:i},nameTransformer:jn});if(p&&r(p),!w(s)){let f=[{spread:"options"}],l=n.parameters.filter(y=>y.in==="body"||y.in==="formData").map(y=>y.mediaType||(y.in==="formData"?"multipart/form-data":void 0)).filter(Boolean).filter(we);return l.length===1&&(l[0]==="multipart/form-data"&&(f=[...f,{spread:"formDataBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:null},{spread:"options?.headers"}]}],t?.("formDataBodySerializer")),l[0]==="application/x-www-form-urlencoded"&&(f=[...f,{spread:"urlSearchParamsBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:l[0]},{spread:"options?.headers"}]}],t?.("urlSearchParamsBodySerializer"))),f=[...f,{key:"url",value:n.path}],p&&(f=[...f,{key:"responseTransformer",value:p}]),o.objectExpression({identifiers:["responseTransformer"],obj:f})}let a=f=>f.reduce((u,l)=>{let y=l.prop,O=s.useOptions?`data.${l.name}`:l.name;return y===O?u[y]=y:Ce(y)===y?u[y]=O:u[`'${y}'`]=O,u},{}),c={method:n.method,url:n.path};n.parametersPath.length&&(c.path=a(n.parametersPath)),n.parametersCookie.length&&(c.cookies=a(n.parametersCookie)),n.parametersHeader.length&&(c.headers=a(n.parametersHeader)),n.parametersQuery.length&&(c.query=a(n.parametersQuery)),n.parametersForm.length&&(c.formData=a(n.parametersForm)),n.parametersBody&&(n.parametersBody.in==="formData"&&(s.useOptions?c.formData=`data.${n.parametersBody.name}`:c.formData=n.parametersBody.name),n.parametersBody.in==="body"&&(s.useOptions?c.body=`data.${n.parametersBody.name}`:c.body=n.parametersBody.name)),n.parametersBody?.mediaType&&(c.mediaType=n.parametersBody?.mediaType),n.responseHeader&&(c.responseHeader=n.responseHeader),p&&(c.responseTransformer=p);let m=n.responses.filter(f=>f.responseTypes.includes("error"));if(m.length>0){let f={};m.forEach(u=>{f[u.code]=u.description??"";}),c.errors=f;}return o.objectExpression({identifiers:["body","cookies","formData","headers","path","query","responseTransformer"],obj:c,shorthand:true})},k=({config:e,handleIllegal:t,id:r,operation:n})=>e.plugins["@hey-api/sdk"]?.methodNameBuilder?e.plugins["@hey-api/sdk"].methodNameBuilder(n):t&&r.match(ie)?`${r}_`:r,Go=({client:e,onClientImport:t,onImport:r,operation:n})=>{let s=b(),i=xc({client:e,onClientImport:t,onImport:r,operation:n});if(!w(s)){let a=te({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:wt}).name,m=n.responses.filter(f=>f.responseTypes.includes("success")).length?te({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:be}).name:"void";return [o.returnFunctionCall({args:[i],name:`(options?.client ?? client).${n.method.toLocaleLowerCase()}`,types:a&&m?[m,a,"ThrowOnError"]:a?["unknown",a,"ThrowOnError"]:m?[m,"unknown","ThrowOnError"]:[]})]}return Be(s)?[o.returnFunctionCall({args:[i],name:"this.httpRequest.request"})]:T(s).name==="legacy/angular"?[o.returnFunctionCall({args:["OpenAPI","this.http",i],name:"__request"})]:[o.returnFunctionCall({args:["OpenAPI",i],name:"__request"})]},Oc=({client:e,onClientImport:t,onImport:r,onNode:n,service:s})=>{let i=b(),p=T(i),a=w(i);for(let u of s.operations)u.parameters.length&&yt({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:gt,onImport:r}),a||yt({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:wt,onImport:r}),u.responses.filter(y=>y.responseTypes.includes("success")).length&&yt({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:be,onImport:r});let c={default:("throwOnError"in p?p.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"};if(!i.plugins["@hey-api/sdk"]?.asClass&&!Be(i)){for(let u of s.operations){let l={parameters:Ho(e,u),returnType:a?zo(e,u):void 0,statements:Go({client:e,onClientImport:t,onImport:r,operation:u}),types:a?void 0:[c]},y=p.name==="legacy/angular"?o.anonymousFunction(l):o.arrowFunction(l),O=o.constVariable({comment:Jo(u),exportConst:true,expression:y,name:k({config:i,handleIllegal:true,id:u.name,operation:u})});n(O);}return}let m=s.operations.map(u=>o.methodDeclaration({accessLevel:"public",comment:Jo(u),isStatic:Be(i)===void 0&&p.name!=="legacy/angular",name:k({config:i,id:u.name,operation:u}),parameters:Ho(e,u),returnType:a?zo(e,u):void 0,statements:Go({client:e,onClientImport:t,onImport:r,operation:u}),types:a?void 0:[c]}));if(!m.length)return;Be(i)?m=[o.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"httpRequest",type:"BaseHttpRequest"}]}),...m]:p.name==="legacy/angular"&&(m=[o.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"http",type:"HttpClient"}]}),...m]);let f=o.classDeclaration({decorator:p.name==="legacy/angular"?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,members:m,name:Je({config:i,name:s.name})});n(f);},Yo=({client:e,files:t})=>{let r=b(),n=w(r),s="sdk";if(t.sdk=new ue({dir:r.output.path,name:`${s}.ts`}),!n)t.sdk.import({module:F({config:r,sourceOutput:s}),name:"createClient"}),t.sdk.import({module:F({config:r,sourceOutput:s}),name:"createConfig"}),t.sdk.import({...q.OptionsLegacyParser,module:F({config:r,sourceOutput:s})});else if(T(r).name==="legacy/angular"?(t.sdk.import({module:"@angular/core",name:"Injectable"}),Be(r)||t.sdk.import({module:"@angular/common/http",name:"HttpClient"}),t.sdk.import({asType:true,module:"rxjs",name:"Observable"})):t.sdk.import({asType:true,module:"./core/CancelablePromise",name:"CancelablePromise"}),r.plugins["@hey-api/sdk"]?.response==="response"&&t.sdk.import({asType:true,module:"./core/ApiResult",name:"ApiResult"}),Be(r)){let p=T(r);t.sdk.import({asType:p.name!=="legacy/angular",module:"./core/BaseHttpRequest",name:"BaseHttpRequest"});}else t.sdk.import({module:"./core/OpenAPI",name:"OpenAPI"}),t.sdk.import({alias:"__request",module:"./core/request",name:"request"});if(!n){let i=T(r),p=o.constVariable({exportConst:true,expression:o.callExpression({functionName:"createClient",parameters:[o.callExpression({functionName:"createConfig",parameters:["throwOnError"in i&&i.throwOnError?o.objectExpression({obj:[{key:"throwOnError",value:true}]}):void 0]})]}),name:"client"});t.sdk.add(p);}for(let i of e.services)Oc({client:e,onClientImport:p=>{t.sdk.import({module:F({config:r,sourceOutput:s}),name:p});},onImport:p=>{t.sdk.import({asType:!p.endsWith("Transformer"),module:`./${t.types.nameWithoutExtension()}`,name:p});},onNode:p=>{t.sdk.add(p);},service:i});};var ei=({clientOptions:e,context:t,plugin:r})=>{let n=t.file({id:De}),i=T(t.config).name==="@hey-api/client-nuxt",p=F({config:t.config,sourceOutput:n.nameWithoutExtension()}),a=n.import({asType:true,module:p,name:"TDataShape"}),c=n.import({asType:true,module:p,name:"Client"}),m=o.typeAliasDeclaration({exportType:true,name:"Options",type:o.typeIntersectionNode({types:[o.typeReferenceNode({typeArguments:i?[o.typeReferenceNode({typeName:"TComposable"}),o.typeReferenceNode({typeName:"TData"}),o.typeReferenceNode({typeName:Pn}),o.typeReferenceNode({typeName:Fe})]:[o.typeReferenceNode({typeName:"TData"}),o.typeReferenceNode({typeName:"ThrowOnError"})],typeName:e.name}),o.typeInterfaceNode({properties:[{comment:["You can provide a client instance returned by `createClient()` instead of","individual options. This might be also useful if you want to implement a","custom client."],isRequired:!r.client,name:"client",type:o.typeReferenceNode({typeName:c.name})},{comment:["You can pass arbitrary values through the `meta` object. This can be","used to access values that aren't defined as part of the SDK function."],isRequired:false,name:"meta",type:o.typeReferenceNode({typeArguments:[o.keywordTypeNode({keyword:"string"}),o.keywordTypeNode({keyword:"unknown"})],typeName:"Record"})}],useLegacyResolution:false})]}),typeParameters:i?[o.typeParameterDeclaration({constraint:o.typeReferenceNode({typeName:"Composable"}),name:"TComposable"}),o.typeParameterDeclaration({constraint:o.typeReferenceNode({typeName:a.name}),defaultType:o.typeReferenceNode({typeName:a.name}),name:"TData"}),o.typeParameterDeclaration({defaultType:o.keywordTypeNode({keyword:"unknown"}),name:Pn}),o.typeParameterDeclaration({defaultType:o.keywordTypeNode({keyword:"undefined"}),name:Fe})]:[o.typeParameterDeclaration({constraint:o.typeReferenceNode({typeName:a.name}),defaultType:o.typeReferenceNode({typeName:a.name}),name:"TData"}),o.typeParameterDeclaration({constraint:o.keywordTypeNode({keyword:"boolean"}),defaultType:o.keywordTypeNode({keyword:"boolean"}),name:"ThrowOnError"})]});n.add(m);};var Pr=({context:e,file:t,operation:r,throwOnError:n})=>{let s=Vs({context:e,file:t,operation:r}),i=it({context:e,file:t,operation:r}),p=q.Options.name;return T(e.config).name==="@hey-api/client-nuxt"?`${p}<${Yt}, ${s.name||"unknown"}, ${i.name||"unknown"}, ${Fe}>`:n?`${p}<${s.name||"unknown"}, ${n}>`:s.name?`${p}<${s.name}>`:p},De="sdk",bc=e=>{if(!e)return;let t=e.split(";")[0]?.trim();if(t){if(t.startsWith("application/json")||t.endsWith("+json"))return "json";if(["application/","audio/","image/","video/"].some(r=>t.startsWith(r)))return "blob";if(t.startsWith("text/"))return "text"}},Sc=({securitySchemeObject:e})=>{if(e.type==="openIdConnect")return {scheme:"bearer",type:"http"};if(e.type==="oauth2")return e.flows.password||e.flows.authorizationCode||e.flows.clientCredentials||e.flows.implicit?{scheme:"bearer",type:"http"}:void 0;if(e.type==="apiKey")return e.in==="header"?{name:e.name,type:"apiKey"}:e.in==="query"||e.in=="cookie"?{in:e.in,name:e.name,type:"apiKey"}:void 0;if(e.type==="http"){let t=e.scheme.toLowerCase();return t==="bearer"||t==="basic"?{scheme:t,type:"http"}:void 0}},Rc=({operation:e,plugin:t})=>{if(!e.security||!t.auth)return [];let r=[];for(let n of e.security){let s=Sc({securitySchemeObject:n});s?r.push(s):console.warn(`\u2757\uFE0F SDK warning: unsupported security scheme. Please open an issue if you'd like it added https://github.com/hey-api/openapi-ts/issues
${JSON.stringify(n,null,2)}`);}return r},ti=({context:e,isRequiredOptions:t,operation:r,plugin:n})=>{let s=e.file({id:De}),i=s.nameWithoutExtension(),p=lr({context:e,file:s,operation:r}),a=it({context:e,file:s,operation:r}),c=[];if(r.body)switch(r.body.type){case "form-data":c.push({spread:"formDataBodySerializer"}),s.import({module:F({config:e.config,sourceOutput:i}),name:"formDataBodySerializer"});break;case "json":break;case "text":c.push({key:"bodySerializer",value:null});break;case "url-search-params":c.push({spread:"urlSearchParamsBodySerializer"}),s.import({module:F({config:e.config,sourceOutput:i}),name:"urlSearchParamsBodySerializer"});break}let m=T(e.config);if(m.name==="@hey-api/client-axios"){for(let x in r.responses)if(Tn({statusCode:x})==="2XX"){let h=r.responses[x],C=bc(h?.mediaType);C&&C!=="json"&&c.push({key:"responseType",value:C});}}let f=Rc({operation:r,plugin:n});f.length&&c.push({key:"security",value:o.arrayLiteralExpression({elements:f})});for(let x in r.parameters?.query){let h=r.parameters.query[x];if((h.schema.type==="array"||h.schema.type==="tuple")&&(h.style!=="form"||!h.explode)){c.push({key:"querySerializer",value:[{key:"array",value:[{key:"explode",value:false},{key:"style",value:"form"}]}]});break}}if(n.transformer==="@hey-api/transformers"){let x=e.file({id:Zt}).identifier({$ref:Tr({id:r.id,type:"response"}),namespace:"value"});x.name&&(s.import({module:s.relativePathToFile({context:e,id:Zt}),name:x.name}),c.push({key:"responseTransformer",value:x.name}));}if(n.validator==="zod"){let x=e.file({id:zt}).identifier({$ref:v({case:"camelCase",id:r.id,type:"response"}),namespace:"value"});x.name&&(s.import({module:s.relativePathToFile({context:e,id:zt}),name:x.name}),c.push({key:"responseValidator",value:o.arrowFunction({async:true,parameters:[{name:"data"}],statements:[o.returnStatement({expression:o.awaitExpression({expression:o.callExpression({functionName:o.propertyAccessExpression({expression:o.identifier({text:x.name}),name:o.identifier({text:"parseAsync"})}),parameters:[o.identifier({text:"data"})]})})})]})}));}c.push({key:"url",value:r.path}),c.push({spread:"options"}),r.body&&c.push({key:"headers",value:[{key:"Content-Type",value:r.body.type==="form-data"?null:r.body.mediaType},{spread:"options?.headers"}]});let u=m.name==="@hey-api/client-nuxt",l=a.name||"unknown",y=p.name||"unknown",O=n.client?s.import({alias:"_heyApiClient",module:s.relativePathToFile({context:e,id:oe}),name:"client"}):void 0,g=o.propertyAccessExpression({expression:o.identifier({text:"options"}),isOptional:!t,name:"client"});return [o.returnFunctionCall({args:[o.objectExpression({identifiers:["responseTransformer"],obj:c})],name:o.propertyAccessExpression({expression:O?.name?o.binaryExpression({left:g,operator:"??",right:o.identifier({text:O.name})}):g,name:o.identifier({text:r.method})}),types:u?[Yt,`${l} | ${Fe}`,y,Fe]:[l,y,"ThrowOnError"]})]},Ic=({context:e,plugin:t})=>{let r=T(e.config),n=r.name==="@hey-api/client-nuxt",s=e.file({id:De}),i=new Map;e.subscribe("operation",({operation:p})=>{let a=!t.client||n||Me(p),c=it({context:e,file:s,operation:p}),m=o.methodDeclaration({accessLevel:"public",comment:[p.deprecated&&"@deprecated",p.summary&&N(p.summary),p.description&&N(p.description)],isStatic:true,name:k({config:e.config,handleIllegal:false,id:p.id,operation:p}),parameters:[{isRequired:a,name:"options",type:Pr({context:e,file:s,operation:p,throwOnError:n?void 0:"ThrowOnError"})}],returnType:void 0,statements:ti({context:e,isRequiredOptions:a,operation:p,plugin:t}),types:n?[{extends:o.typeNode("Composable"),name:Yt},{default:c.name?o.typeReferenceNode({typeName:c.name}):o.typeNode("undefined"),extends:c.name?o.typeReferenceNode({typeName:c.name}):void 0,name:Fe}]:[{default:("throwOnError"in r?r.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]}),f=Array.from(new Set(p.tags));f.length||f.push("default");for(let u of f){let l=Rr(u),y=i.get(l)??[];y.push(m),i.set(l,y);}}),e.subscribe("after",()=>{for(let[p,a]of i){let c=o.classDeclaration({decorator:void 0,members:a,name:Je({config:e.config,name:p})});s.add(c);}});},Tc=({context:e,plugin:t})=>{let r=T(e.config),n=r.name==="@hey-api/client-nuxt",s=e.file({id:De});e.subscribe("operation",({operation:i})=>{let p=!t.client||n||Me(i),a=it({context:e,file:s,operation:i}),c=o.constVariable({comment:[i.deprecated&&"@deprecated",i.summary&&N(i.summary),i.description&&N(i.description)],exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:p,name:"options",type:Pr({context:e,file:s,operation:i,throwOnError:n?void 0:"ThrowOnError"})}],returnType:void 0,statements:ti({context:e,isRequiredOptions:p,operation:i,plugin:t}),types:n?[{extends:o.typeNode("Composable"),name:Yt},{default:a.name?o.typeReferenceNode({typeName:a.name}):o.typeNode("undefined"),extends:a.name?o.typeReferenceNode({typeName:a.name}):void 0,name:Fe}]:[{default:("throwOnError"in r?r.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]}),name:k({config:e.config,handleIllegal:true,id:i.id,operation:i})});s.add(c);});},ri=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:De,path:t.output}),n=F({config:e.config,sourceOutput:r.nameWithoutExtension()}),s=r.import({...q.Options,alias:"ClientOptions",module:n});T(e.config).name==="@hey-api/client-nuxt"&&r.import({asType:true,module:n,name:"Composable"}),ei({clientOptions:s,context:e,plugin:t}),t.asClass?Ic({context:e,plugin:t}):Tc({context:e,plugin:t});};var Nn={_dependencies:["@hey-api/typescript"],_handler:ri,_handlerLegacy:Yo,_infer:(e,t)=>{e.client&&(typeof e.client=="boolean"&&(e.client=t.pluginByTag("client","\u{1F6AB} client needs to be set to generate SDKs - which HTTP client do you want to use?")),t.ensureDependency(e.client)),e.transformer&&(typeof e.transformer=="boolean"&&(e.transformer=t.pluginByTag("transformer")),t.ensureDependency(e.transformer)),e.validator&&(typeof e.validator=="boolean"&&(e.validator=t.pluginByTag("validator")),t.ensureDependency(e.validator));},asClass:false,auth:true,client:true,exportFromIndex:true,name:"@hey-api/sdk",operationId:true,output:"sdk",response:"body",serviceNameBuilder:"{{name}}Service"};var Cc="$OpenApiTs",B={$refs:[],base:"",description:null,enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],template:null,type:""},Pc=({comments:e,leadingComment:t,meta:r,obj:n,onNode:s,...i})=>{if(!r)return;let{created:p,name:a}=te({create:true,meta:r,...i});if(p){let c=o.enumDeclaration({comments:e,leadingComment:t,name:a,obj:n});s(c);}},Le=({comment:e,meta:t,onCreated:r,onNode:n,type:s,...i})=>{if(!t)return {created:false,name:""};let p=te({create:true,meta:t,...i}),{created:a,name:c}=p;if(a){let m=o.typeAliasDeclaration({comment:e,exportType:true,name:c,type:s});n(m),r?.(c);}return p},jc=e=>{let t=b(),r=[];si(e),e.model.enums.forEach(n=>t.plugins["@hey-api/typescript"]?.enums!=="typescript+namespace"?ni({...e,model:n}):Ac({...e,model:n,onNode:s=>{r.push(s);}})),r.length&&e.onNode(o.namespaceDeclaration({name:e.model.name,statements:r}));},ni=({client:e,model:t,onNode:r})=>{let n=b(),s={},i={};t.enum.forEach(a=>{let{key:c,value:m}=gn(a);s[c]=m;let f=a.customDescription||a.description;f&&(i[c]=[N(f)]);});let p=[t.description&&N(t.description),t.deprecated&&"@deprecated"];if(n.plugins["@hey-api/typescript"]?.enums==="typescript"||n.plugins["@hey-api/typescript"]?.enums==="typescript+namespace"){Pc({client:e,comments:i,leadingComment:p,meta:t.meta,obj:s,onNode:r});return}Le({client:e,comment:p,meta:t.meta,onCreated:a=>{if(n.plugins["@hey-api/typescript"]?.enums==="javascript"){let c=o.objectExpression({multiLine:true,obj:Object.entries(s).map(([f,u])=>({comments:i[f],key:f,value:u})),unescape:true}),m=o.constVariable({assertion:"const",comment:p,exportConst:true,expression:c,name:a});r(m);}},onNode:r,type:No(t.enum)});},Ac=({model:e,onNode:t})=>{let r={},n={};e.enum.forEach(s=>{let{key:i,value:p}=gn(s);r[i]=p;let a=s.customDescription||s.description;a&&(n[i]=[N(a)]);}),t(o.enumDeclaration({comments:n,leadingComment:[e.description&&N(e.description),e.deprecated&&"@deprecated"],name:e.meta?.name||e.name,obj:r}));},si=({client:e,model:t,onNode:r})=>{Le({client:e,comment:[t.description&&N(t.description),t.deprecated&&"@deprecated"],meta:t.meta,onNode:r,type:ee(t)});},Nc=e=>{switch(e.model.export){case "all-of":case "any-of":case "one-of":case "interface":return jc(e);case "enum":return ni(e);default:return si(e)}},Ec=({client:e,onNode:t})=>{let r={},n=b();if(!n.plugins["@hey-api/sdk"]&&!n.plugins["@hey-api/typescript"]?.tree)return;let s=w(n);for(let p of e.services)for(let a of p.operations){if(!a.parameters.length&&!a.responses.length)continue;r[a.path]||(r[a.path]={});let c=r[a.path];c[a.method]||(c[a.method]={});let m=c[a.method];if(m.$ref=a.name,a.responses.length>0){if(m.res||(m.res={}),Array.isArray(m.res))continue;a.responses.forEach(u=>{m.res[u.code]=u;});}if(a.parameters.length>0){let u={mediaType:null,...B,in:"body",name:"body",prop:"body"},l=a.parameters.filter(h=>h.in==="body");l.length||(l=a.parameters.filter(h=>h.in==="formData")),l.length===1?u={...B,...l[0],in:"body",isRequired:l[0].isRequired,name:"body",prop:"body"}:l.length>1&&(u={...B,in:"body",isRequired:l.some(h=>h.isRequired),mediaType:"multipart/form-data",name:"body",prop:"body",properties:l});let y={...B,in:"header",isRequired:xe(a.parameters.filter(h=>h.in==="header")),mediaType:null,name:s?"header":"headers",prop:s?"header":"headers",properties:a.parameters.filter(h=>h.in==="header").sort(Qt)},O={...B,in:"path",isRequired:xe(a.parameters.filter(h=>h.in==="path")),mediaType:null,name:"path",prop:"path",properties:a.parameters.filter(h=>h.in==="path").sort(Qt)},g={...B,in:"query",isRequired:xe(a.parameters.filter(h=>h.in==="query")),mediaType:null,name:"query",prop:"query",properties:a.parameters.filter(h=>h.in==="query").sort(Qt)},x=s?Ao([...a.parameters]):[u,y,O,g].filter(h=>h.properties.length||h.$refs.length||h.mediaType);m.req=x,Le({client:e,meta:{$ref:a.name,name:a.name},nameTransformer:gt,onNode:t,type:ee({...B,properties:x})});}let f=a.responses.filter(u=>u.responseTypes.includes("success"));if(f.length>0){Le({client:e,meta:{$ref:a.name,name:a.name},nameTransformer:be,onNode:t,type:ee({...B,export:"any-of",properties:f})});let u=a.responses.filter(l=>l.responseTypes.includes("error"));s||Le({client:e,meta:{$ref:a.name,name:a.name},nameTransformer:wt,onNode:t,type:ee(u.length?{...B,export:"one-of",properties:u}:{...B,base:"unknown"})});}}let i=Object.entries(r).map(([p,a])=>{let c=Object.entries(a).map(([f,u])=>{let l=f,y=[];if(u.req){let g=u.$ref,{name:x}=te({client:e,meta:{$ref:g,name:g},nameTransformer:gt}),h={...B,base:x,export:"reference",isRequired:true,name:"req",properties:[],type:x};y=[...y,h];}if(u.res){let g=Object.entries(u.res).map(([h,C])=>({...B,...C,isRequired:true,name:String(h)})),x={...B,isRequired:true,name:"res",properties:g};y=[...y,x];}return {...B,isRequired:true,name:l.toLocaleLowerCase(),properties:y}}).filter(Boolean);return {...B,isRequired:true,name:`'${p}'`,properties:c}});n.plugins["@hey-api/typescript"]?.tree&&Le({client:e,meta:{$ref:"@hey-api/openapi-ts",name:Cc},onNode:t,type:ee({...B,properties:i})});},oi=({client:e,files:t})=>{let r=b();t.types=new ue({dir:r.output.path,name:"types.ts"});let n=s=>{t.types?.add(s);};for(let s of e.models)Nc({client:e,model:s,onNode:n});Ec({client:e,onNode:n});};var et="data",$c=e=>e.base==="unknown"&&e.export==="generic"&&e.type==="unknown",ii=({client:e,model:t})=>t.$refs.map(n=>{let s=e.models.find(i=>i.meta?.$ref===n);if(!s)throw new Error(`Ref ${n} could not be found. Transformers cannot be generated without having access to all refs.`);return s}),ai=e=>{let t=e.model.meta.name,{name:r}=Le({...e,meta:{$ref:`transformers/${t}`,name:t},nameTransformer:Zo,onCreated:s=>{let i=jr({...e,meta:{$ref:`transformers/${t}`,name:s},path:[et]});pi({...e,async:false,name:s,statements:i});},type:`(${et}: any) => ${t}`});return {created:!!e.client.types[r],name:r}},kc=e=>{let{model:t}=e,r=ii(e);if(r.length===1){let{created:n,name:s}=ai({...e,model:r[0]});return n?[o.transformArrayMutation({path:e.path,transformerName:s})]:[]}return Xt(t)||t.link&&!Array.isArray(t.link)&&t.link.export==="any-of"&&t.link.properties.find(n=>Xt(n))?[o.transformArrayMap({path:e.path,transformExpression:o.conditionalExpression({condition:o.identifier({text:"item"}),whenFalse:o.identifier({text:"item"}),whenTrue:o.transformNewDate({parameterName:"item"})})})]:[]},qc=e=>{let{model:t}=e,r=[...e.path,t.name];return t.type==="string"&&t.export!=="array"&&Xt(t)?[o.transformDateMutation({path:r})]:jr({...e,model:t,path:r})},jr=e=>{let{model:t}=e;switch(t.export){case "array":return kc(e);case "interface":return t.properties.flatMap(r=>qc({...e,model:r}));case "reference":{if(t.$refs.length!==1)return [];let r=ii(e),{created:n,name:s}=ai({...e,model:r[0]});return n?t.in==="response"?[o.expressionToStatement({expression:o.callExpression({functionName:s,parameters:[et]})})]:o.transformFunctionMutation({path:e.path,transformerName:s}):[]}default:return []}},pi=({async:e,client:t,name:r,onNode:n,onRemoveNode:s,statements:i})=>{let p={created:false,name:r};if(!i.length)return $o({client:t,name:r}),s?.(),p;let a=o.arrowFunction({async:e,multiLine:true,parameters:[{name:et}],statements:[...i,o.returnVariable({expression:et})]}),c=o.constVariable({exportConst:true,expression:a,name:r,typeName:r});return n(c),{created:true,name:r}},ci=({client:e,files:t})=>{let r=b(),n=i=>{t.types?.add(i);},s=()=>{t.types?.removeNode();};for(let i of e.services)for(let p of i.operations){let a=p.responses.filter(f=>f.responseTypes.includes("success"));if(!a.length)continue;let c=a.filter(f=>!$c(f));if(!c.length)continue;if(c.length>1){r.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${vt(p)} has ${c.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);continue}let m=be(p.name);Le({client:e,meta:{$ref:`transformers/${m}`,name:m},nameTransformer:jn,onCreated:f=>{let u=a.length>1?a.flatMap(l=>{let y=jr({client:e,meta:{$ref:`transformers/${m}`,name:m},model:l,onNode:n,onRemoveNode:s,path:[et]});return y.length?[o.ifStatement({expression:o.safeAccessExpression(["data"]),thenStatement:o.block({statements:y})})]:[]}):jr({client:e,meta:{$ref:`transformers/${m}`,name:m},model:a[0],onNode:n,onRemoveNode:s,path:[et]});pi({async:true,client:e,name:f,onNode:n,onRemoveNode:s,statements:u});},onNode:n,type:`(${et}: any) => Promise<${m}>`});}};var En={_dependencies:["@hey-api/typescript"],_handler:Xo,_handlerLegacy:ci,_tags:["transformer"],bigInt:true,dates:true,exportFromIndex:false,name:"@hey-api/transformers",output:"transformers"};var mi=({context:e,name:t})=>(Te.lastIndex=0,Te.test(t)?d__default.default.factory.createNumericLiteral(t):j({case:e.config.output.case,value:t}));var Ar=o.keywordTypeNode({keyword:"string"}),Mc=({server:e})=>{let t=fe(e.url);return t.protocol&&t.host?o.literalTypeNode({literal:o.stringLiteral({text:e.url})}):o.templateLiteralType({value:[t.protocol||Ar,"://",t.host||Ar,t.port?`:${t.port}`:"",t.path||""]})},fi=({context:e,identifier:t,servers:r})=>{let n=e.file({id:I});if(!t.name)return;let s=T(e.config),i=r.map(a=>Mc({server:a}));r.length?"strictBaseUrl"in s&&s.strictBaseUrl||i.push(o.typeIntersectionNode({types:[Ar,d__default.default.factory.createTypeLiteralNode([])]})):i.push(Ar);let p=o.typeAliasDeclaration({exportType:true,name:t.name,type:o.typeInterfaceNode({properties:[{name:J(e.config),type:o.typeUnionNode({types:i})}],useLegacyResolution:false})});n.add(p);};var Mt=({schema:e})=>{let t=[e.description&&N(e.description),e.deprecated&&"@deprecated"].filter(Boolean);if(t.length)return t},kn=({$ref:e,accessScope:t,plugin:r})=>{if(!t)return e;let n=e.split("/"),s=n.pop(),i=t==="read"?r.readableNameBuilder:r.writableNameBuilder,p=Fc({name:s,nameBuilder:i});return n.push(p),n.join("/")},Fc=({name:e,nameBuilder:t})=>t?t.replace("{{name}}",e):e,Dc=({schema:e,state:t})=>!!(t?.accessScope&&e.accessScope&&t.accessScope!==e.accessScope),Lc=({$ref:e,context:t,plugin:r,schema:n})=>{let i=t.file({id:I}).identifier({$ref:e,create:true,namespace:"value"});if(!i.created)return;let p=di({plugin:r,schema:n}),a=o.objectExpression({multiLine:true,obj:p.obj});return o.constVariable({assertion:"const",comment:Mt({schema:n}),exportConst:true,expression:a,name:i.name||""})},di=({plugin:e,schema:t})=>{let r=[];return {obj:(t.items??[]).map(s=>{let i=typeof s.const;r.includes(i)||r.push(i);let p;return s.title?p=s.title:i==="number"||i==="string"?p=`${s.const}`:i==="boolean"?p=s.const?"true":"false":s.const===null&&(p="null"),p&&(p=j({case:e.enumsCase,stripLeadingSeparators:false,value:p}),Te.lastIndex=0,Te.test(p)&&(e.enums==="typescript"||e.enums==="typescript+namespace")&&(p=`_${p}`)),{comments:Mt({schema:s}),key:p,value:s.const}}),typeofItems:r}},qn=({$ref:e,context:t,plugin:r,schema:n,state:s})=>{let p=t.file({id:I}).identifier({$ref:e,create:true,namespace:"type"});if(!p.created&&!ur(e)&&r.enums!=="typescript+namespace")return;let a=M({context:t,plugin:r,schema:{...n,type:void 0},state:s});if(a)return o.typeAliasDeclaration({comment:Mt({schema:n}),exportType:true,name:p.name||"",type:a})},ui=({$ref:e,context:t,plugin:r,schema:n,state:s})=>{let p=t.file({id:I}).identifier({$ref:e,create:true,namespace:"value"});if(!p.created&&r.enums!=="typescript+namespace")return;let a=di({plugin:r,schema:n});return a.typeofItems.filter(m=>m!=="number"&&m!=="string").length?qn({$ref:e,context:t,plugin:r,schema:n,state:s}):o.enumDeclaration({leadingComment:Mt({schema:n}),name:p.name||"",obj:a.obj})},_c=({context:e,namespace:t,plugin:r,schema:n,state:s})=>{if(!n.items)return o.typeArrayNode(o.keywordTypeNode({keyword:"unknown"}));n=Oe({schema:n});let i=[];for(let p of n.items){let a=M({context:e,namespace:t,plugin:r,schema:p,state:s});a&&i.push(a);}return i.length===1?o.typeArrayNode(i[0]):n.logicalOperator==="and"?o.typeArrayNode(o.typeIntersectionNode({types:i})):o.typeArrayNode(o.typeUnionNode({types:i}))},Kc=({schema:e})=>e.const!==void 0?o.literalTypeNode({literal:o.ots.boolean(e.const)}):o.keywordTypeNode({keyword:"boolean"}),Bc=({$ref:e,context:t,namespace:r,plugin:n,schema:s,state:i})=>{let p=t.file({id:I}),a=e?ur(e):false,c=a||!!n.exportInlineEnums;if(e&&c){if(!n.enums){let f=qn({$ref:e,context:t,plugin:n,schema:s,state:i});f&&p.add(f);}if(n.enums==="javascript"){let f=qn({$ref:e,context:t,plugin:n,schema:s,state:i});f&&p.add(f);let u=Lc({$ref:e,context:t,plugin:n,schema:s});u&&p.add(u);}if(n.enums==="typescript"){let f=ui({$ref:e,context:t,plugin:n,schema:s,state:i});f&&p.add(f);}if(n.enums==="typescript+namespace"){let f=ui({$ref:e,context:t,plugin:n,schema:s,state:i});f&&(a?p.add(f):r.push(f));}}return M({context:t,plugin:n,schema:{...s,type:void 0},state:i})},Vc=({context:e,schema:t})=>t.const!==void 0?o.literalTypeNode({literal:o.ots.number(t.const)}):t.type==="integer"&&t.format==="int64"&&e.config.plugins["@hey-api/transformers"]?.bigInt?o.typeReferenceNode({typeName:"bigint"}):o.keywordTypeNode({keyword:"number"}),Uc=({context:e,namespace:t,plugin:r,schema:n,state:s})=>{let i,p=[],a=[],c=n.required??[],m=false,f=false;for(let u in n.properties){let l=n.properties[u];if(Dc({schema:l,state:s})){f=true;continue}let O=c.includes(u);p.push({comment:Mt({schema:l}),isReadOnly:l.accessScope==="read",isRequired:O,name:mi({context:e,name:u}),type:M({$ref:`${Ct}${u}`,context:e,namespace:t,plugin:r,schema:l,state:s})}),a.push(l),O||(m=true);}if(n.additionalProperties&&(n.additionalProperties.type!=="never"||!a.length)&&(n.additionalProperties.type==="never"?a=[n.additionalProperties]:a.unshift(n.additionalProperties),m&&a.push({type:"undefined"}),i={isRequired:true,name:"key",type:M({context:e,namespace:t,plugin:r,schema:a.length===1?a[0]:{items:a,logicalOperator:"or"},state:s})}),!(f&&!p.length&&!i))return o.typeInterfaceNode({indexProperty:i,properties:p,useLegacyResolution:false})},Wc=({context:e,schema:t})=>{if(t.const!==void 0)return o.literalTypeNode({literal:o.stringLiteral({text:t.const})});if(t.format){if(t.format==="binary")return o.typeUnionNode({types:[o.typeReferenceNode({typeName:"Blob"}),o.typeReferenceNode({typeName:"File"})]});if((t.format==="date-time"||t.format==="date")&&e.config.plugins["@hey-api/transformers"]?.dates)return o.typeReferenceNode({typeName:"Date"})}return o.keywordTypeNode({keyword:"string"})},Qc=({context:e,namespace:t,plugin:r,schema:n,state:s})=>{let i=[];if(n.const&&Array.isArray(n.const))i=n.const.map(p=>o.valueToExpression({value:p})??o.identifier({text:"unknown"}));else if(n.items)for(let p of n.items){let a=M({context:e,namespace:t,plugin:r,schema:p,state:s});a&&i.push(a);}return o.typeTupleNode({types:i})},li=({$ref:e,context:t,namespace:r,plugin:n,schema:s,state:i})=>{switch(s.type){case "array":return _c({context:t,namespace:r,plugin:n,schema:s,state:i});case "boolean":return Kc({schema:s});case "enum":return Bc({$ref:e,context:t,namespace:r,plugin:n,schema:s,state:i});case "integer":case "number":return Vc({context:t,schema:s});case "never":return o.keywordTypeNode({keyword:"never"});case "null":return o.literalTypeNode({literal:o.null()});case "object":return Uc({context:t,namespace:r,plugin:n,schema:s,state:i});case "string":return Wc({context:t,schema:s});case "tuple":return Qc({context:t,namespace:r,plugin:n,schema:s,state:i});case "undefined":return o.keywordTypeNode({keyword:"undefined"});case "unknown":return o.keywordTypeNode({keyword:"unknown"});case "void":return o.keywordTypeNode({keyword:"void"})}},$n=({parameters:e})=>{let t={type:"object"};if(e){let r={},n=[];for(let s in e){let i=e[s];r[s]=Oe({schema:i.schema}),i.required&&n.push(s);}t.properties=r,n.length&&(t.required=n);}return t},Xc=({context:e,operation:t,plugin:r})=>{let n=e.file({id:I}),s={type:"object"},i=[];s.properties||(s.properties={}),t.body?(s.properties.body=t.body.schema,t.body.required&&i.push("body")):s.properties.body={type:"never"},t.parameters?.header&&(s.properties.headers=$n({parameters:t.parameters.header}),s.properties.headers.required&&i.push("headers")),t.parameters?.path?(s.properties.path=$n({parameters:t.parameters.path}),s.properties.path.required&&i.push("path")):s.properties.path={type:"never"},t.parameters?.query?(s.properties.query=$n({parameters:t.parameters.query}),s.properties.query.required&&i.push("query")):s.properties.query={type:"never"},s.properties.url={const:t.path,type:"string"},i.push("url"),s.required=i;let p=n.identifier({$ref:v({id:t.id,type:"data"}),create:true,namespace:"type"}),a=M({context:e,plugin:r,schema:s,state:r.readOnlyWriteOnlyBehavior==="off"?void 0:{accessScope:"write"}});if(a){let c=o.typeAliasDeclaration({exportType:true,name:p.name||"",type:a});n.add(c);}},Hc=({context:e,operation:t,plugin:r})=>{Xc({context:e,operation:t,plugin:r});let n=e.file({id:I}),{error:s,errors:i,response:p,responses:a}=Ye(t);if(i){let c=n.identifier({$ref:v({id:t.id,type:"errors"}),create:true,namespace:"type"});if(c.name){let m=M({context:e,plugin:r,schema:i,state:r.readOnlyWriteOnlyBehavior==="off"?void 0:{accessScope:"read"}});if(m){let f=o.typeAliasDeclaration({exportType:true,name:c.name,type:m});n.add(f);}if(s){let f=n.identifier({$ref:v({id:t.id,type:"error"}),create:true,namespace:"type"});if(f.name){let u=o.typeReferenceNode({typeName:c.name}),l=d__default.default.factory.createTypeOperatorNode(d__default.default.SyntaxKind.KeyOfKeyword,u),y=o.typeAliasDeclaration({exportType:true,name:f.name,type:o.indexedAccessTypeNode({indexType:l,objectType:u})});n.add(y);}}}}if(a){let c=n.identifier({$ref:v({id:t.id,type:"responses"}),create:true,namespace:"type"});if(c.name){let m=M({context:e,plugin:r,schema:a,state:r.readOnlyWriteOnlyBehavior==="off"?void 0:{accessScope:"read"}});if(m){let f=o.typeAliasDeclaration({exportType:true,name:c.name,type:m});n.add(f);}if(p){let f=n.identifier({$ref:v({id:t.id,type:"response"}),create:true,namespace:"type"});if(f.name){let u=o.typeReferenceNode({typeName:c.name}),l=d__default.default.factory.createTypeOperatorNode(d__default.default.SyntaxKind.KeyOfKeyword,u),y=o.typeAliasDeclaration({exportType:true,name:f.name,type:o.indexedAccessTypeNode({indexType:l,objectType:u})});n.add(y);}}}}},M=({$ref:e,context:t,namespace:r=[],plugin:n,schema:s,state:i})=>{let p=t.file({id:I}),a;if(s.$ref){let c=t.resolveIrRef(s.$ref),m=kn({$ref:s.$ref,accessScope:c.accessScopes?.length?i?.accessScope:void 0,plugin:n}),f=p.identifier({$ref:m,create:true,namespace:"type"});a=o.typeReferenceNode({typeName:f.name||""});}else if(s.type)a=li({$ref:e,context:t,namespace:r,plugin:n,schema:s,state:i});else if(s.items)if(s=Oe({schema:s}),s.items){let c=[];for(let m of s.items){let f=M({context:t,namespace:r,plugin:n,schema:m,state:i});f&&c.push(f);}a=s.logicalOperator==="and"?o.typeIntersectionNode({types:c}):o.typeUnionNode({types:c});}else a=M({context:t,namespace:r,plugin:n,schema:s,state:i});else a=li({context:t,namespace:r,plugin:n,schema:{type:"unknown"},state:i});if(e&&ur(e)){if(r.length){let c=p.identifier({$ref:e,create:true,namespace:"value"}),m=o.namespaceDeclaration({name:c.name||"",statements:r});p.add(m);}if(s.type!=="enum"&&a){let c=p.identifier({$ref:e,create:true,namespace:"type"}),m=o.typeAliasDeclaration({comment:Mt({schema:s}),exportType:true,name:c.name||"",type:a});p.add(m);}}return a},yi=({context:e,plugin:t})=>{let n=e.createFile({exportFromIndex:t.exportFromIndex,id:I,identifierCase:t.identifierCase,path:t.output}).identifier({$ref:"ClientOptions",create:true,namespace:"type"});e.subscribe("schema",({$ref:i,schema:p})=>{if(!p.accessScopes?.length||t.readOnlyWriteOnlyBehavior==="off"){M({$ref:i,context:e,plugin:t,schema:p,state:void 0});return}M({$ref:kn({$ref:i,accessScope:"read",plugin:t}),context:e,plugin:t,schema:p,state:{accessScope:"read"}}),M({$ref:kn({$ref:i,accessScope:"write",plugin:t}),context:e,plugin:t,schema:p,state:{accessScope:"write"}});}),e.subscribe("parameter",({$ref:i,parameter:p})=>{M({$ref:i,context:e,plugin:t,schema:p.schema,state:void 0});}),e.subscribe("requestBody",({$ref:i,requestBody:p})=>{M({$ref:i,context:e,plugin:t,schema:p.schema,state:t.readOnlyWriteOnlyBehavior==="off"?void 0:{accessScope:"write"}});}),e.subscribe("operation",({operation:i})=>{Hc({context:e,operation:i,plugin:t});});let s=[];e.subscribe("server",({server:i})=>{s.push(i);}),e.subscribe("after",()=>{fi({context:e,identifier:n,servers:s});});};var vn={_handler:yi,_handlerLegacy:oi,enums:false,enumsCase:"SCREAMING_SNAKE_CASE",exportFromIndex:true,exportInlineEnums:false,identifierCase:"PascalCase",name:"@hey-api/typescript",output:"types",readOnlyWriteOnlyBehavior:"split",readableNameBuilder:"{{name}}Readable",style:"preserve",tree:false,writableNameBuilder:"{{name}}Writable"};var tt=({context:e,operation:t,plugin:r})=>{let n=e.file({id:r.name});return Pr({context:e,file:n,operation:t})},Er=({context:e,operation:t,plugin:r})=>{let n=e.file({id:r.name}),i={asType:true,name:lr({context:e,file:n,operation:t}).name||""};if(i.name||(i=n.import({asType:true,module:r.name,name:"DefaultError"})),T(e.config).name==="@hey-api/client-axios"){let a=n.import({asType:true,module:"axios",name:"AxiosError"});i={...a,name:`${a.name}<${i.name}>`};}return i},$r=({context:e,operation:t,plugin:r})=>{let n=e.file({id:r.name});return it({context:e,file:n,operation:t}).name||"unknown"};var hi="createQueryKey",qr="QueryKey",er="TOptions",gi=o.identifier({text:"infinite"}),kr=o.identifier({text:"options"}),vr=({context:e,plugin:t})=>{let r=e.file({id:t.name}),n=r.identifier({$ref:`#/ir/${hi}`,create:true,namespace:"value"});if(n.name){let s=o.indexedAccessTypeNode({indexType:o.literalTypeNode({literal:o.ots.number(0)}),objectType:o.typeReferenceNode({typeArguments:[o.typeReferenceNode({typeName:er})],typeName:qr})}),i=o.constVariable({expression:o.arrowFunction({multiLine:true,parameters:[{name:"id",type:o.typeReferenceNode({typeName:"string"})},{isRequired:false,name:"options",type:o.typeReferenceNode({typeName:er})},{isRequired:false,name:"infinite",type:o.typeReferenceNode({typeName:"boolean"})}],returnType:o.typeTupleNode({types:[s]}),statements:[o.constVariable({assertion:s,expression:o.objectExpression({multiLine:false,obj:[{key:"_id",value:o.identifier({text:"id"})},{key:J(e.config),value:o.identifier({text:`(options?.client ?? _heyApiClient).getConfig().${J(e.config)}`})}]}),name:"params",typeName:s}),o.ifStatement({expression:gi,thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"_infinite"}),right:gi})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:kr,isOptional:true,name:o.identifier({text:"body"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"body"}),right:o.propertyAccessExpression({expression:"options",name:"body"})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:kr,isOptional:true,name:o.identifier({text:"headers"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"headers"}),right:o.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:kr,isOptional:true,name:o.identifier({text:"path"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"path"}),right:o.propertyAccessExpression({expression:"options",name:"path"})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:kr,isOptional:true,name:o.identifier({text:"query"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"query"}),right:o.propertyAccessExpression({expression:"options",name:"query"})})})]})}),o.returnStatement({expression:o.arrayLiteralExpression({elements:[o.identifier({text:"params"})]})})],types:[{extends:o.typeReferenceNode({typeName:o.identifier({text:q.Options.name})}),name:er}]}),name:n.name});r.add(i);}},zc=({context:e,id:t,isInfinite:r,plugin:n})=>{let i=e.file({id:n.name}).identifier({$ref:`#/ir/${hi}`,namespace:"value"});return o.callExpression({functionName:i.name||"",parameters:[o.ots.string(t),"options",r?o.ots.boolean(true):void 0]})},wr=({context:e,plugin:t})=>{let r=e.file({id:t.name}),n=[{name:"_id",type:o.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:o.keywordTypeNode({keyword:"boolean"})}],s=o.typeAliasDeclaration({exportType:true,name:qr,type:o.typeTupleNode({types:[o.typeIntersectionNode({types:[o.typeReferenceNode({typeName:`Pick<${er}, '${J(e.config)}' | 'body' | 'headers' | 'path' | 'query'>`}),o.typeInterfaceNode({properties:n,useLegacyResolution:true})]})]}),typeParameters:[{extends:o.typeReferenceNode({typeName:o.identifier({text:q.Options.name})}),name:er}]});r.add(s);},tr=({context:e,isInfinite:t,operation:r})=>`${k({config:e.config,id:r.id,operation:r})}${t?"Infinite":""}QueryKey`,Mr=({context:e,isInfinite:t,operation:r,plugin:n,typeQueryKey:s})=>{let i=e.file({id:n.name}),p=tt({context:e,operation:r,plugin:n}),a=tr({context:e,isInfinite:t,operation:r}),c=i.identifier({$ref:`#/queryKey/${a}`,create:true,namespace:"value"});return o.constVariable({exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:Me(r),name:"options",type:p}],returnType:t?s:void 0,statements:zc({context:e,id:r.id,isInfinite:t,plugin:n})}),name:c.name||""})};var Oi="createInfiniteParams",xi="infiniteQueryOptions",Gc=({context:e,plugin:t})=>{let r=e.file({id:t.name}),n=o.constVariable({expression:o.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:o.typeReferenceNode({typeName:`QueryKey<${q.Options.name}>`})},{name:"page",type:o.typeReferenceNode({typeName:"K"})}],statements:[o.constVariable({expression:o.identifier({text:"queryKey[0]"}),name:"params"}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"body"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"body"}),right:o.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"headers"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"headers"}),right:o.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"path"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"path"}),right:o.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].path"},{assertion:"any",spread:"page.path"}]})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"query"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"query"}),right:o.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].query"},{assertion:"any",spread:"page.query"}]})})})]})}),o.returnVariable({expression:o.asExpression({expression:o.asExpression({expression:o.identifier({text:"params"}),type:o.keywordTypeNode({keyword:"unknown"})}),type:d__default.default.factory.createTypeQueryNode(o.identifier({text:"page"}))})})],types:[{extends:o.typeReferenceNode({typeName:o.identifier({text:`Pick<QueryKey<${q.Options.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:Oi});r.add(n);},Zc=({context:e,operation:t})=>`${k({config:e.config,id:t.id,operation:t})}InfiniteOptions`,bi=({context:e,operation:t,plugin:r,queryFn:n,state:s})=>{if(!r.infiniteQueryOptions||!["get","post"].includes(t.method))return s;let i=Mo({context:e,operation:t});if(!i)return s;let p=e.file({id:r.name}),a=Me(t);s.hasInfiniteQueries||(s.hasInfiniteQueries=true,s.hasCreateQueryKeyParamsFunction||(wr({context:e,plugin:r}),vr({context:e,plugin:r}),s.hasCreateQueryKeyParamsFunction=true),s.hasCreateInfiniteParamsFunction||(Gc({context:e,plugin:r}),s.hasCreateInfiniteParamsFunction=true),p.import({module:r.name,name:xi}),s.typeInfiniteData=p.import({asType:true,module:r.name,name:"InfiniteData"})),s.hasUsedQueryFn=true;let c=tt({context:e,operation:t,plugin:r}),m=Er({context:e,operation:t,plugin:r}),f=$r({context:e,operation:t,plugin:r}),u=`${qr}<${c}>`,l=`Pick<${u}[0], 'body' | 'headers' | 'path' | 'query'>`,y=M({context:e,plugin:e.config.plugins["@hey-api/typescript"],schema:i.schema,state:void 0}),O=y?`${ae({node:y,unescape:true})} | ${l}`:`${l}`,g=Mr({context:e,isInfinite:true,operation:t,plugin:r,typeQueryKey:u});p.add(g);let x=tr({context:e,isInfinite:true,operation:t}),h=p.identifier({$ref:`#/queryKey/${x}`,namespace:"value"}),C=o.constVariable({comment:[],exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:a,name:"options",type:c}],statements:[o.returnFunctionCall({args:[o.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:o.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:[o.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:o.conditionalExpression({condition:o.binaryExpression({left:o.typeOfExpression({text:"pageParam"}),operator:"===",right:o.ots.string("object")}),whenFalse:o.objectExpression({multiLine:true,obj:[{key:i.in,value:o.objectExpression({multiLine:true,obj:[{key:i.name,value:o.identifier({text:"pageParam"})}]})}]}),whenTrue:o.identifier({text:"pageParam"})}),name:"page",typeName:l}),o.constVariable({expression:o.callExpression({functionName:Oi,parameters:["queryKey","page"]}),name:"params"}),o.constVariable({destructure:true,expression:o.awaitExpression({expression:o.callExpression({functionName:n,parameters:[o.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:o.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),o.returnVariable({expression:"data"})]})},{key:"queryKey",value:o.callExpression({functionName:h.name||"",parameters:["options"]})}]})],name:xi,types:[f,m.name,`${typeof s.typeInfiniteData=="string"?s.typeInfiniteData:s.typeInfiniteData.name}<${f}>`,u,O]})]}),name:Zc({context:e,operation:t})});p.add(C);};var Si="mutationOptions",Yc=({context:e,operation:t})=>`${k({config:e.config,id:t.id,operation:t})}Mutation`,Ri=({context:e,operation:t,plugin:r,queryFn:n,state:s})=>{if(!r.mutationOptions||!["delete","patch","post","put"].includes(t.method))return s;let i=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",p=e.file({id:r.name});s.hasMutations||(s.hasMutations=true,p.import({asType:true,module:r.name,name:i})),s.hasUsedQueryFn=true;let a=tt({context:e,operation:t,plugin:r}),c=Er({context:e,operation:t,plugin:r}),m=$r({context:e,operation:t,plugin:r}),f=`${i}<${m}, ${c.name}, ${a}>`,u=o.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${a}>`}],returnType:f,statements:[o.constVariable({expression:o.objectExpression({obj:[{key:"mutationFn",value:o.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:[o.constVariable({destructure:true,expression:o.awaitExpression({expression:o.callExpression({functionName:n,parameters:[o.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),name:"data"}),o.returnVariable({expression:"data"})]})}]}),name:Si,typeName:f}),o.returnVariable({expression:Si})]}),l=o.constVariable({comment:[],exportConst:true,expression:u,name:Yc({context:e,operation:t})});return p.add(l),s};var Ii="queryOptions",em=({context:e,operation:t})=>`${k({config:e.config,id:t.id,operation:t})}Options`,Ti=({context:e,operation:t,plugin:r,queryFn:n,state:s})=>{if(!r.queryOptions||!["get","post"].includes(t.method))return s;let i=e.file({id:r.name}),p=Me(t);s.hasQueries||(s.hasQueries=true,s.hasCreateQueryKeyParamsFunction||(wr({context:e,plugin:r}),vr({context:e,plugin:r}),s.hasCreateQueryKeyParamsFunction=true),i.import({module:r.name,name:Ii})),s.hasUsedQueryFn=true;let a=Mr({context:e,isInfinite:false,operation:t,plugin:r});i.add(a);let c=tt({context:e,operation:t,plugin:r}),m=tr({context:e,isInfinite:false,operation:t}),f=i.identifier({$ref:`#/queryKey/${m}`,namespace:"value"}),u=o.constVariable({comment:[],exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:p,name:"options",type:c}],statements:[o.returnFunctionCall({args:[o.objectExpression({obj:[{key:"queryFn",value:o.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:[o.constVariable({destructure:true,expression:o.awaitExpression({expression:o.callExpression({functionName:n,parameters:[o.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:o.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),o.returnVariable({expression:"data"})]})},{key:"queryKey",value:o.callExpression({functionName:f.name||"",parameters:["options"]})}]})],name:Ii})]}),name:em({context:e,operation:t})});return i.add(u),s};var Se=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:t.name,path:t.output}),n={hasCreateInfiniteParamsFunction:false,hasCreateQueryKeyParamsFunction:false,hasInfiniteQueries:false,hasMutations:false,hasQueries:false,hasUsedQueryFn:false,typeInfiniteData:void 0};e.subscribe("before",()=>{r.import({...q.Options,module:r.relativePathToFile({context:e,id:De})});}),e.subscribe("operation",({operation:s})=>{n.hasUsedQueryFn=false;let i=[e.config.plugins["@hey-api/sdk"]?.asClass&&Je({config:e.config,name:Rr(s.tags?.[0]||"default")}),k({config:e.config,handleIllegal:!e.config.plugins["@hey-api/sdk"]?.asClass,id:s.id,operation:s})].filter(Boolean).join(".");Ti({context:e,operation:s,plugin:t,queryFn:i,state:n}),bi({context:e,operation:s,plugin:t,queryFn:i,state:n}),Ri({context:e,operation:s,plugin:t,queryFn:i,state:n}),n.hasUsedQueryFn&&r.import({module:r.relativePathToFile({context:e,id:De}),name:i.split(".")[0]});}),e.subscribe("after",()=>{(n.hasQueries||n.hasInfiniteQueries)&&r.import({alias:"_heyApiClient",module:r.relativePathToFile({context:e,id:oe}),name:"client"});});};var tm=e=>`${k({config:b(),id:e.name,operation:e})}InfiniteOptions`,rm=e=>`${k({config:b(),id:e.name,operation:e})}Mutation`,nm=({config:e,id:t,operation:r})=>`${k({config:e,id:t,operation:r})}Options`,Fr=({config:e,id:t,isInfinite:r,operation:n})=>`${k({config:e,id:t,operation:n})}${r?"Infinite":""}QueryKey`,sm=e=>{switch(e.in){case "formData":return "body";case "header":return "headers";default:return e.in}},om="createInfiniteParams",qi="createQueryKey",Ci="infiniteQueryOptions",Pi="mutationOptions",Mn="QueryKey",ji="queryOptions",nr="TOptions",im=({file:e})=>{let t=o.constVariable({expression:o.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:o.typeNode(`QueryKey<${q.OptionsLegacyParser.name}>`)},{name:"page",type:o.typeNode("K")}],statements:[o.constVariable({expression:o.identifier({text:"queryKey[0]"}),name:"params"}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"body"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"body"}),right:o.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"headers"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"headers"}),right:o.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"path"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"path"}),right:o.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].path"},{spread:"page.path"}]})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"page"}),name:o.identifier({text:"query"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"query"}),right:o.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].query"},{spread:"page.query"}]})})})]})}),o.returnVariable({expression:d__default.default.factory.createAsExpression(d__default.default.factory.createAsExpression(o.identifier({text:"params"}),d__default.default.factory.createKeywordTypeNode(d__default.default.SyntaxKind.UnknownKeyword)),d__default.default.factory.createTypeQueryNode(o.identifier({text:"page"})))})],types:[{extends:o.typeReferenceNode({typeName:o.identifier({text:`Pick<QueryKey<${q.OptionsLegacyParser.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:om});e.add(t);},Ai=({file:e})=>{let t=o.indexedAccessTypeNode({indexType:o.typeNode(0),objectType:o.typeNode(Mn,[o.typeNode(nr)])}),r=o.identifier({text:"infinite"}),n=o.constVariable({expression:o.arrowFunction({multiLine:true,parameters:[{name:"id",type:o.typeNode("string")},{isRequired:false,name:"options",type:o.typeNode(nr)},{isRequired:false,name:"infinite",type:o.typeNode("boolean")}],returnType:t,statements:[o.constVariable({assertion:t,expression:o.objectExpression({multiLine:false,obj:[{key:"_id",value:o.identifier({text:"id"})},{key:J(b()),value:o.identifier({text:`(options?.client ?? _heyApiClient).getConfig().${J(b())}`})}]}),name:"params",typeName:t}),o.ifStatement({expression:r,thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"_infinite"}),right:r})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"options"}),isOptional:true,name:o.identifier({text:"body"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"body"}),right:o.propertyAccessExpression({expression:"options",name:"body"})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"options"}),isOptional:true,name:o.identifier({text:"headers"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"headers"}),right:o.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"options"}),isOptional:true,name:o.identifier({text:"path"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"path"}),right:o.propertyAccessExpression({expression:"options",name:"path"})})})]})}),o.ifStatement({expression:o.propertyAccessExpression({expression:o.identifier({text:"options"}),isOptional:true,name:o.identifier({text:"query"})}),thenStatement:o.block({statements:[o.expressionToStatement({expression:o.binaryExpression({left:o.propertyAccessExpression({expression:"params",name:"query"}),right:o.propertyAccessExpression({expression:"options",name:"query"})})})]})}),o.returnVariable({expression:"params"})],types:[{extends:o.typeReferenceNode({typeName:o.identifier({text:q.OptionsLegacyParser.name})}),name:nr}]}),name:qi});e.add(n);},Ni=({file:e})=>{let t=[{name:"_id",type:o.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:o.keywordTypeNode({keyword:"boolean"})}],r=o.typeAliasDeclaration({name:Mn,type:o.typeTupleNode({types:[o.typeIntersectionNode({types:[o.typeReferenceNode({typeName:`Pick<${nr}, '${J(b())}' | 'body' | 'headers' | 'path' | 'query'>`}),o.typeInterfaceNode({properties:t,useLegacyResolution:true})]})]}),typeParameters:[{extends:o.typeReferenceNode({typeName:o.identifier({text:q.OptionsLegacyParser.name})}),name:nr}]});e.add(r);},wn=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:s}=yt({client:e,meta:r.parameters.length?{$ref:r.name,name:r.name}:void 0,nameTransformer:gt,onImport:p=>{t.import({asType:true,module:n,name:p});}});return {typeData:An({importedType:s})}},Ei=({client:e,file:t,operation:r,pluginName:n,typesModulePath:s})=>{let i=b(),{name:p}=yt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:wt,onImport:m=>{t.import({asType:true,module:s,name:m});}}),a={asType:true,name:p};if(a.name||(a=t.import({asType:true,module:n,name:"DefaultError"})),T(i).name==="@hey-api/client-axios"){let m=t.import({asType:true,module:"axios",name:"AxiosError"});a={...m,name:`${m.name}<${a.name}>`};}return {typeError:a}},$i=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:s}=yt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:be,onImport:p=>{t.import({asType:true,module:n,name:p});}});return {typeResponse:s||"void"}},ki=({id:e,isInfinite:t})=>o.arrayLiteralExpression({elements:[o.callExpression({functionName:qi,parameters:[o.ots.string(e),"options",t?o.ots.boolean(true):void 0]})],multiLine:false}),Re=({client:e,files:t,plugin:r})=>{let n=b();if(w(n))throw new Error("\u{1F6AB} TanStack Query plugin does not support legacy clients");let s=t[r.name];s.import({...q.OptionsLegacyParser,module:F({config:n,sourceOutput:r.output})});let i=Tt({moduleOutput:t.types.nameWithoutExtension(),sourceOutput:r.output}),p=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",a,c=false,m=false,f=false,u=false,l=false,y=new Map;for(let O of e.services)for(let g of O.operations){let x=vt(g);if(y.has(x))continue;y.set(x,true);let h=[n.plugins["@hey-api/sdk"]?.asClass&&Je({config:n,name:O.name}),k({config:n,handleIllegal:!n.plugins["@hey-api/sdk"]?.asClass,id:g.name,operation:g})].filter(Boolean).join("."),C=false;if(r.queryOptions&&["GET","POST"].includes(g.method)){l||(l=true,m||(Ni({file:s}),Ai({file:s}),m=true),s.import({module:r.name,name:ji})),C=true;let{typeData:X}=wn({client:e,file:s,operation:g,typesModulePath:i}),rt=xe(g.parameters),W=o.constVariable({exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:rt,name:"options",type:X}],statements:ki({id:g.name})}),name:Fr({config:n,id:g.name,operation:g})});s.add(W);let ht=o.constVariable({comment:[],exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:rt,name:"options",type:X}],statements:[o.returnFunctionCall({args:[o.objectExpression({obj:[{key:"queryFn",value:o.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:[o.constVariable({destructure:true,expression:o.awaitExpression({expression:o.callExpression({functionName:h,parameters:[o.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:o.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),o.returnVariable({expression:"data"})]})},{key:"queryKey",value:o.callExpression({functionName:Fr({config:n,id:g.name,operation:g}),parameters:["options"]})}]})],name:ji})]}),name:nm({config:n,id:g.name,operation:g})});s.add(ht);}if(r.infiniteQueryOptions&&["GET","POST"].includes(g.method)){let X,rt=g.parameters.find(W=>{if(z(n.input.pagination).test(W.name))return X=W,true;if(W.in==="body"){if(W.export==="reference"){let Ie=W.$refs[0];return e.models.find(_e=>_e.meta?.$ref===Ie)?.properties.find(_e=>{if(z(n.input.pagination).test(_e.name))return X=_e,true})}return W.properties.find(Ie=>{if(z(n.input.pagination).test(Ie.name))return X=Ie,true})}});if(rt&&X){f||(f=true,m||(Ni({file:s}),Ai({file:s}),m=true),c||(im({file:s}),c=true),s.import({module:r.name,name:Ci}),a=s.import({asType:true,module:r.name,name:"InfiniteData"})),C=true;let{typeData:W}=wn({client:e,file:s,operation:g,typesModulePath:i}),{typeError:ht}=Ei({client:e,file:s,operation:g,pluginName:r.name,typesModulePath:i}),{typeResponse:Ie}=$i({client:e,file:s,operation:g,typesModulePath:i}),sr=xe(g.parameters),_e=`${Mn}<${W}>`,Lr=`Pick<${_e}[0], 'body' | 'headers' | 'path' | 'query'>`,Fi=`${X.base} | ${Lr}`,Di=o.constVariable({exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:sr,name:"options",type:W}],returnType:_e,statements:ki({id:g.name,isInfinite:true})}),name:Fr({config:n,id:g.name,isInfinite:true,operation:g})});s.add(Di);let Li=o.constVariable({comment:[],exportConst:true,expression:o.arrowFunction({parameters:[{isRequired:sr,name:"options",type:W}],statements:[o.returnFunctionCall({args:[o.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:o.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:[o.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:o.conditionalExpression({condition:o.binaryExpression({left:o.typeOfExpression({text:"pageParam"}),operator:"===",right:o.ots.string("object")}),whenFalse:o.objectExpression({multiLine:true,obj:[{key:sm(rt),value:o.objectExpression({multiLine:true,obj:[{key:X.name,value:o.identifier({text:"pageParam"})}]})}]}),whenTrue:o.identifier({text:"pageParam"})}),name:"page",typeName:Lr}),o.constVariable({expression:o.callExpression({functionName:"createInfiniteParams",parameters:["queryKey","page"]}),name:"params"}),o.constVariable({destructure:true,expression:o.awaitExpression({expression:o.callExpression({functionName:h,parameters:[o.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:o.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),o.returnVariable({expression:"data"})]})},{key:"queryKey",value:o.callExpression({functionName:Fr({config:n,id:g.name,isInfinite:true,operation:g}),parameters:["options"]})}]})],name:Ci,types:[Ie,ht.name,`${typeof a=="string"?a:a.name}<${Ie}>`,_e,Fi]})]}),name:tm(g)});s.add(Li);}}if(r.mutationOptions&&["DELETE","PATCH","POST","PUT"].includes(g.method)){u||(u=true,s.import({asType:true,module:r.name,name:p})),C=true;let{typeData:X}=wn({client:e,file:s,operation:g,typesModulePath:i}),{typeError:rt}=Ei({client:e,file:s,operation:g,pluginName:r.name,typesModulePath:i}),{typeResponse:W}=$i({client:e,file:s,operation:g,typesModulePath:i}),ht=o.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${X}>`}],statements:[o.constVariable({expression:o.objectExpression({obj:[{key:"mutationFn",value:o.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:[o.constVariable({destructure:true,expression:o.awaitExpression({expression:o.callExpression({functionName:h,parameters:[o.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),name:"data"}),o.returnVariable({expression:"data"})]})}]}),name:Pi,typeName:`${p}<${W}, ${rt.name}, ${X}>`}),o.returnVariable({expression:Pi})]}),Ie=o.constVariable({comment:[],exportConst:true,expression:ht,name:rm(g)});s.add(Ie);}(l||f)&&s.import({alias:"_heyApiClient",module:Tt({moduleOutput:t.client.nameWithoutExtension(),sourceOutput:r.output}),name:"client"}),C&&s.import({module:Tt({moduleOutput:t.sdk.nameWithoutExtension(),sourceOutput:r.output}),name:h.split(".")[0]});}};var Fn={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Se,_handlerLegacy:Re,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/angular-query-experimental",output:"@tanstack/angular-query-experimental",queryOptions:true};var Dn={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Se,_handlerLegacy:Re,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/react-query",output:"@tanstack/react-query",queryOptions:true};var Ln={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Se,_handlerLegacy:Re,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/solid-query",output:"@tanstack/solid-query",queryOptions:true};var _n={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Se,_handlerLegacy:Re,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/svelte-query",output:"@tanstack/svelte-query",queryOptions:true};var Kn={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Se,_handlerLegacy:Re,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/vue-query",output:"@tanstack/vue-query",queryOptions:true};var vi="fastify",am=({context:e,operation:t})=>{let r=e.file({id:vi}),n=e.file({id:I}),s=[],i=n.identifier({$ref:v({id:t.id,type:"data"}),namespace:"type"});i.name&&(t.body&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:I}),name:i.name}),s.push({isRequired:t.body.required,name:"Body",type:`${i.name}['body']`})),t.parameters&&(t.parameters.header&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:I}),name:i.name}),s.push({isRequired:Ze(t.parameters.header),name:"Headers",type:`${i.name}['headers']`})),t.parameters.path&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:I}),name:i.name}),s.push({isRequired:Ze(t.parameters.path),name:"Params",type:`${i.name}['path']`})),t.parameters.query&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:I}),name:i.name}),s.push({isRequired:Ze(t.parameters.query),name:"Querystring",type:`${i.name}['query']`}))));let{errors:p,responses:a}=Ye(t),c,m=n.identifier({$ref:v({id:t.id,type:"errors"}),namespace:"type"});if(m.name&&p&&p.properties){let O=Object.keys(p.properties);if(O.length){if(!O.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:e,id:I}),name:m.name}),c=o.typeReferenceNode({typeName:m.name});else if(O.length>1){r.import({asType:true,module:r.relativePathToFile({context:e,id:I}),name:m.name});let x=o.typeReferenceNode({typeName:m.name}),h=o.literalTypeNode({literal:o.stringLiteral({text:"default"})});c=o.typeReferenceNode({typeArguments:[x,h],typeName:"Omit"});}}}let f,u=n.identifier({$ref:v({id:t.id,type:"responses"}),namespace:"type"});if(u.name&&a&&a.properties){let O=Object.keys(a.properties);if(O.length){if(!O.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:e,id:I}),name:u.name}),f=o.typeReferenceNode({typeName:u.name});else if(O.length>1){r.import({asType:true,module:r.relativePathToFile({context:e,id:I}),name:u.name});let x=o.typeReferenceNode({typeName:u.name}),h=o.literalTypeNode({literal:o.stringLiteral({text:"default"})});f=o.typeReferenceNode({typeArguments:[x,h],typeName:"Omit"});}}}let l=[c,f].filter(Boolean);return l.length&&s.push({name:"Reply",type:o.typeIntersectionNode({types:l})}),s.length?{name:t.id,type:o.typeNode("RouteHandler",[o.typeInterfaceNode({properties:s,useLegacyResolution:false})])}:void 0},wi=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:vi,path:t.output}),n=[];e.subscribe("operation",({operation:s})=>{let i=am({context:e,operation:s});i&&n.push(i);}),e.subscribe("after",()=>{let s=r.identifier({$ref:"RouteHandlers",create:true,namespace:"type"});s.name&&(n.length&&r.import({asType:true,module:"fastify",name:"RouteHandler"}),r.add(o.typeAliasDeclaration({exportType:true,name:s.name,type:o.typeInterfaceNode({properties:n,useLegacyResolution:false})})));});};var Bn={_dependencies:["@hey-api/typescript"],_handler:wi,_handlerLegacy:()=>{},exportFromIndex:false,name:"fastify",output:"fastify"};var Vn={_handler:Bo,_handlerLegacy:()=>{},_tags:["validator"],exportFromIndex:false,name:"zod",output:"zod"};var Dr={"@hey-api/client-axios":Gr,"@hey-api/client-fetch":Zr,"@hey-api/client-next":Yr,"@hey-api/client-nuxt":en,"@hey-api/schemas":Rn,"@hey-api/sdk":Nn,"@hey-api/transformers":En,"@hey-api/typescript":vn,"@tanstack/angular-query-experimental":Fn,"@tanstack/react-query":Dn,"@tanstack/solid-query":Ln,"@tanstack/svelte-query":_n,"@tanstack/vue-query":Kn,fastify:Bn,"legacy/angular":tn,"legacy/axios":rn,"legacy/fetch":nn,"legacy/node":sn,"legacy/xhr":on,zod:Vn};var Mi=["@hey-api/typescript","@hey-api/sdk"],mm=e=>{let t={path:""};return typeof e.input=="string"?t.path=e.input:e.input&&(e.input.path||e.input.organization)?t={...t,path:"https://get.heyapi.dev",...e.input}:t={...t,path:e.input},t},fm=({pluginConfigs:e,userPlugins:t,userPluginsConfig:r})=>{let n=new Set,s=new Set,i={},p=a=>{if(n.has(a))throw new Error(`Circular reference detected at '${a}'`);if(!s.has(a)){if(n.add(a),!e[a])throw new Error(`\u{1F6AB} unknown plugin dependency "${a}" - do you need to register a custom plugin with this name?`);let m=Dr[a],f=r[a];if(f&&m){let l=Object.keys(f).find(y=>y.startsWith("_"));if(l)throw new Error(`\u{1F6AB} cannot register plugin "${a}" - attempting to override a native plugin option "${l}"`)}let u={_dependencies:[],...m,...f};if(u._infer){let l={ensureDependency:y=>{typeof y=="string"&&!u._dependencies.includes(y)&&(u._dependencies=[...u._dependencies,y]);},pluginByTag:(y,O)=>{for(let g of t){let x=Dr[g]||e[g];if(x&&x._tags?.includes(y)&&g!==a)return g}throw new Error(O||`\u{1F6AB} missing plugin - no plugin with tag "${y}" found`)}};u._infer(u,l);}for(let l of u._dependencies)p(l);n.delete(a),s.add(a),i[a]=u;}};for(let a of t)p(a);return {pluginOrder:Array.from(s),plugins:i}},um=e=>{let t={clean:true,format:false,indexFile:true,lint:false,path:""};return typeof e.output=="string"?t.path=e.output:t={...t,...e.output},t},lm=e=>typeof e=="string"?e.startsWith("@hey-api/client")||e.startsWith("legacy/"):e.name.startsWith("@hey-api/client")||e.name.startsWith("legacy/")||e._tags&&e._tags.includes("client"),dm=e=>{let t={},r=Mi;e.plugins&&(e.plugins=e.plugins.filter(s=>typeof s=="string"&&s||typeof s!="string"&&s.name),e.plugins.length===1&&lm(e.plugins[0])?r=[...Mi,...e.plugins]:r=e.plugins);let n=r.map(s=>typeof s=="string"?s:(s.name&&(t[s.name]=s),s.name)).filter(Boolean);return fm({pluginConfigs:{...t,...Dr},userPlugins:n,userPluginsConfig:t})},ym=e=>{let t={enabled:false,interval:1e3,timeout:6e4};return typeof e.input.path!="string"||(typeof e.watch=="boolean"?t.enabled=e.watch:typeof e.watch=="number"?(t.enabled=true,t.interval=e.watch):e.watch&&(t={...t,...e.watch})),t},gm=async e=>{let t;if(e?.configFile){let s=e.configFile.split(".");t=s.slice(0,s.length-1).join(".");}let{config:r}=await c12.loadConfig({configFile:t,name:"openapi-ts"});return (Array.isArray(e)?e:Array.isArray(r)?r.map(s=>({...s,...e})):[{...r??{},...e}]).map(s=>{let{base:i,configFile:p="",dryRun:a=false,experimentalParser:c=true,exportCore:m=true,name:f,request:u,useOptions:l=true}=s,y=Qn(s);y.level==="debug"&&console.warn("userConfig:",s);let O=mm(s),g=um(s);if(!O.path)throw new Error("\u{1F6AB} missing input - which OpenAPI specification should we use to generate your output?");if(!g.path)throw new Error("\u{1F6AB} missing output - where should we generate your output?");l||console.warn("\u2757\uFE0F Deprecation warning: useOptions set to false. This setting will be removed in future versions. Please migrate useOptions to true https://heyapi.dev/openapi-ts/migrating.html#v0-27-38"),g.path=At__default.default.resolve(process.cwd(),g.path);let x=Zn({...dm(s),base:i,configFile:p,dryRun:a,experimentalParser:c,exportCore:false,input:O,logs:y,name:f,output:g,request:u,useOptions:l,watch:ym({...s,input:O})});return x.exportCore=w(x)?m:false,y.level==="debug"&&console.warn("config:",x),x})};
exports.getSpec=Bi;exports.initConfigs=gm;exports.parseOpenApiSpec=Qp;//# sourceMappingURL=internal.cjs.map
//# sourceMappingURL=internal.cjs.map